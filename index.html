<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ESGSync</title>
    <link href="css/main.css" rel="stylesheet" />
    <link rel="icon" type="image/x-icon" href="assets/images/favicon.ico">
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="pdf-template.js"></script>
    <style>
        /* Responsive menu styles */
        @media (min-width: 1024px) {
            .lg\:hidden { display: none !important; }
            .hidden.lg\:flex { display: flex !important; }
            .hidden.lg\:block { display: block !important; }
        }
        
        @media (max-width: 1023px) {
            .lg\:hidden { display: flex !important; }
            .hidden.lg\:flex { display: none !important; }
            .hidden.lg\:block { display: none !important; }
        }
        
        /* Additional responsive padding */
        @media (min-width: 768px) {
            .md\:px-12 { padding-left: 3rem; padding-right: 3rem; }
            .md\:py-16 { padding-top: 4rem; padding-bottom: 4rem; }
            .md\:text-5xl { font-size: 3rem; line-height: 1; }
            .md\:text-xl { font-size: 1.25rem; line-height: 1.75rem; }
            .md\:px-8 { padding-left: 2rem; padding-right: 2rem; }
            .md\:py-4 { padding-top: 1rem; padding-bottom: 1rem; }
            .md\:text-lg { font-size: 1.125rem; line-height: 1.75rem; }
            .md\:py-12 { padding-top: 3rem; padding-bottom: 3rem; }
        }
        
        @media (min-width: 1024px) {
            .lg\:px-28 { padding-left: 7rem; padding-right: 7rem; }
            .lg\:px-20 { padding-left: 5rem; padding-right: 5rem; }
            .lg\:py-20 { padding-top: 5rem; padding-bottom: 5rem; }
            .lg\:py-0 { padding-top: 0; padding-bottom: 0; }
            .lg\:h-\[700px\] { height: 700px; }
            .lg\:w-\[584px\] { width: 584px; }
            .lg\:w-auto { width: auto; }
            .lg\:text-\[60px\] { font-size: 60px; }
            .lg\:leading-\[60px\] { line-height: 60px; }
            .lg\:leading-\[33px\] { line-height: 33px; }
            .lg\:text-left { text-align: left; }
            .lg\:justify-start { justify-content: flex-start; }
            .lg\:justify-between { justify-content: space-between; }
            .lg\:justify-end { justify-content: flex-end; }
            .lg\:flex-row { flex-direction: row; }
            .lg\:mb-8 { margin-bottom: 2rem; }
            .lg\:mx-0 { margin-left: 0; margin-right: 0; }
            .lg\:gap-12 { gap: 3rem; }
            .lg\:h-\[384px\] { height: 384px; }
            .lg\:w-\[584px\] { width: 584px; }
        }
        
        @media (min-width: 640px) {
            .sm\:flex-row { flex-direction: row; }
        }
        
        /* Mobile menu animation improvements */
        .mobile-menu-transition {
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), 
                       opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1), 
                       visibility 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* Burger menu animations */
        #burger-line-1, #burger-line-2, #burger-line-3 {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            transform-origin: center;
            display: block;
            background-color: #1f2937 !important;
        }
        
        /* Mobile menu button styles */
        #mobile-menu-button {
            gap: 2px;
        }
        
        /* Additional responsive classes */
        .w-10 { width: 2.5rem; }
        .h-10 { height: 2.5rem; }
        .bg-gray-100 { background-color: #f3f4f6; }
        .bg-gray-800 { background-color: #1f2937; }
        .hover\:bg-gray-200:hover { background-color: #e5e7eb; }
        .focus\:ring-2:focus { box-shadow: 0 0 0 2px rgba(156, 163, 175, 0.5); }
        .focus\:ring-gray-300:focus { box-shadow: 0 0 0 2px rgba(209, 213, 219, 0.5); }
        
        /* Footer spacing */
        .pt-16 { padding-top: 4rem; }
        .pb-8 { padding-bottom: 2rem; }

        /* Missing Tailwind-like margin-top utilities (ensure these work) */
        .mt-1 { margin-top: 0.25rem; }
        .mt-4 { margin-top: 1rem; }
        .mt-10 { margin-top: 2.5rem; }
        
        /* Ensure mobile menu is hidden on desktop */
        @media (min-width: 1024px) {
            #mobile-menu {
                display: none !important;
            }
        }
        
        /* Modal (survey) */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.6);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 16px;
        }
        .modal-overlay.show { display: flex; }
        .modal-content {
            background: #fff;
            width: 100%;
            max-width: 860px;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 20px;
            border-bottom: 1px solid #eee;
        }
        .modal-body { padding: 20px; max-height: 75vh; overflow: auto; }
        .modal-footer { padding: 16px 20px; border-top: 1px solid #eee; display: flex; gap: 12px; justify-content: flex-end; }
        .btn { display: inline-flex; align-items: center; justify-content: center; border-radius: 10px; padding: 10px 16px; font-weight: 600; transition: transform .15s ease, background .2s ease; }
        .btn:active { transform: scale(0.98); }
        .btn-primary { background: #95ce24; color: #fff; }
        .btn-primary:hover { background: #7fb01f; }
        .btn-secondary { background: #f3f4f6; color: #111827; }
        .btn-secondary:hover { background: #e5e7eb; }
        .q-group { border: 1px solid #e5e7eb; border-radius: 12px; padding: 16px; margin-top: 16px; }
        .q-title { font-weight: 700; color: #111827; margin-bottom: 8px; }
        .q-sub { color: #6b7280; margin-top: 4px; }
        .q-row { display: grid; grid-template-columns: 1fr; gap: 12px; }
        @media (min-width: 640px) { .q-row { grid-template-columns: repeat(2, minmax(0, 1fr)); } }
        .q-field { display: flex; flex-direction: column; gap: 8px; }
        .q-field label { font-size: 14px; color: #374151; }
        .q-radio-row { display: flex; flex-wrap: wrap; gap: 10px; }
        .q-radio-row label { display: inline-flex; align-items: center; gap: 8px; background: #f9fafb; padding: 8px 10px; border-radius: 8px; border: 1px solid #e5e7eb; cursor: pointer; }
        .q-radio-row input { accent-color: #95ce24; }
        .q-select, .q-input, .q-textarea { border: 1px solid #d1d5db; border-radius: 8px; padding: 10px 12px; font-size: 14px; }
        .q-textarea { min-height: 90px; resize: vertical; }
        .result-box { border: 1px solid #e5e7eb; border-radius: 12px; padding: 16px; background: #fafafa; }
        .result-grid { display: grid; grid-template-columns: 1fr; gap: 12px; }
        @media (min-width: 640px) { .result-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); } }
        
        /* Calculator result animations */
        .result-container {
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                       box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .result-container:hover {
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        /* Form input focus states */
        .form-input:focus {
            border-color: #91cb24;
            box-shadow: 0 0 0 3px rgba(145, 203, 36, 0.1);
        }
        
        /* Loading state */
        .calculating {
            animation: pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* Hero image aspect ratio preservation */
        .hero-image {
            width: 100%;
            max-width: 600px;
            height: auto;
        }
        
        /* Full-width hero video */
        .hero-video-fullwidth {
            max-width: 100%;
            height: auto;
            object-fit: contain;
            border-radius: 16px;
        }
        
        /* Custom video controls */
        .custom-video-container {
            position: relative;
            display: inline-block;
            max-width: 100%;
            width: auto;
        }
        
        .custom-video {
            width: 100%;
            height: 100%;
            border-radius: 16px;
            cursor: pointer;
        }
        
        .custom-controls {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0.4) 50%, transparent 100%);
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            opacity: 0;
            transition: opacity 0.3s ease;
            border-radius: 0 0 16px 16px;
        }
        
        .custom-video-container:hover .custom-controls {
            opacity: 1;
        }
        
        .control-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            flex-shrink: 0;
        }
        
        .control-btn:hover {
            background: rgba(145, 203, 36, 0.8);
            transform: scale(1.1);
        }
        
        .control-btn svg {
            width: 16px;
            height: 16px;
            fill: white;
        }
        
        .progress-container {
            flex: 1;
            height: 4px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            min-width: 60px;
            user-select: none;
        }
        
        .progress-container:hover {
            background: rgba(255, 255, 255, 0.4);
        }
        
        .progress-bar {
            height: 100%;
            background: #91cb24;
            border-radius: 2px;
            width: 0%;
            transition: width 0.1s ease;
            position: relative;
        }
        
        .progress-bar::after {
            content: '';
            position: absolute;
            right: -4px;
            top: 50%;
            transform: translateY(-50%);
            width: 8px;
            height: 8px;
            background: #91cb24;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .volume-container {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .volume-slider {
            width: 50px;
            height: 3px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
            cursor: pointer;
            position: relative;
            user-select: none;
        }
        
        .volume-slider:hover {
            background: rgba(255, 255, 255, 0.4);
        }
        
        .volume-progress {
            height: 100%;
            background: #91cb24;
            border-radius: 2px;
            width: 100%;
            position: relative;
        }
        
        .volume-progress::after {
            content: '';
            position: absolute;
            right: -3px;
            top: 50%;
            transform: translateY(-50%);
            width: 6px;
            height: 6px;
            background: #91cb24;
            border-radius: 50%;
        }
        
        .time-display {
            color: white;
            font-size: 11px;
            font-weight: 500;
            min-width: 70px;
            text-align: center;
        }
        
        .fullscreen-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 4px;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            flex-shrink: 0;
        }
        
        .fullscreen-btn:hover {
            background: rgba(145, 203, 36, 0.8);
        }
        
        .fullscreen-btn svg {
            width: 14px;
            height: 14px;
            fill: white;
        }
        
        @media (max-width: 639px) {
            .custom-controls {
                padding: 10px;
                gap: 8px;
            }
            
            .control-btn {
                width: 32px;
                height: 32px;
            }
            
            .control-btn svg {
                width: 14px;
                height: 14px;
            }
            
            .volume-container {
                gap: 4px;
            }
            
            .volume-slider {
                width: 40px;
                height: 3px;
            }
            
            .time-display {
                font-size: 10px;
                min-width: 60px;
            }
            
            .fullscreen-btn {
                width: 28px;
                height: 28px;
            }
            
            .fullscreen-btn svg {
                width: 12px;
                height: 12px;
            }
            
            .progress-container {
                height: 3px;
                min-width: 40px;
            }
            
            .progress-bar::after {
                width: 6px;
                height: 6px;
                right: -3px;
            }
        }
        
        @media (max-width: 480px) {
            .custom-controls {
                padding: 8px;
                gap: 6px;
            }
            
            .control-btn {
                width: 28px;
                height: 28px;
            }
            
            .control-btn svg {
                width: 12px;
                height: 12px;
            }
            
            .volume-slider {
                width: 30px;
            }
            
            .time-display {
                font-size: 9px;
                min-width: 50px;
            }
            
            .fullscreen-btn {
                width: 24px;
                height: 24px;
            }
            
            .fullscreen-btn svg {
                width: 10px;
                height: 10px;
            }
            
            .volume-container {
                display: none;
            }
        }
        
        /* Language selector styles - Button/Dropdown design */
        .language-button {
            border: 1px solid #10b981; /* green-500 */
            border-radius: 8px;
            transition: all 0.2s ease-in-out;
        }
        
        .language-button:hover {
            background-color: #f9fafb; /* gray-50 */
        }
        
        .language-dropdown {
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s ease-in-out;
        }
        
        .language-option-active {
            background-color: #d1fae5 !important; /* emerald-100 */
            color: #065f46 !important; /* emerald-800 */
        }
        
        .language-option-active:hover {
            background-color: #d1fae5 !important;
        }
        
        /* Mobile language selector improvements */
        @media (max-width: 1023px) {
            .mobile-language-button {
                border-radius: 8px;
                transition: all 0.2s ease;
            }
            
            .mobile-language-button:hover:not(.bg-green-100) {
                background-color: rgba(0, 0, 0, 0.05);
            }
        }
        
		/* Typing headline styles */
		.typing-headline { display: block; position: relative; }
		.typing-caret { display: inline-block; width: 1px; height: 1em; background:#111827; animation: blink 1s step-end infinite; vertical-align: baseline; margin-left:2px; }
		@keyframes blink { 50% { opacity: 0; } }
    </style>
<script type="module" src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Fmaximisach2862back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.5"></script>

<!-- Typed.js for headline typing -->
<script src="https://cdn.jsdelivr.net/npm/typed.js@2.1.0/dist/typed.umd.js"></script>
</head>
<body class="bg-white font-inter">
    <!-- Header -->
    <header class="sticky top-0 z-50 bg-white/95 border-b border-gray-200 h-[73px] transition-transform duration-300" role="banner" id="main-header">
        <div class="flex items-center justify-between h-full px-6 md:px-12 lg:px-28">
            <!-- Logo -->
            <div class="flex items-center">
                <img src="assets/images/img_headerlogo.svg" alt="ESGSyncPRO Logo" class="h-[40px] w-[71px]" />
            </div>
            
            <!-- Desktop Navigation -->
            <nav class="hidden lg:flex items-center space-x-8" role="navigation">
                <a href="#home" class="text-gray-700 text-base font-normal hover:text-green-500 transition-colors" onclick="handleNavigation(this); return false;" data-translate="nav.home">Home</a>
                <a href="#features" class="text-gray-700 text-base font-normal hover:text-green-500 transition-colors" onclick="handleNavigation(this); return false;" data-translate="nav.features">Features</a>
                <a href="#pricing" class="text-gray-700 text-base font-normal hover:text-green-500 transition-colors" onclick="handleNavigation(this); return false;" data-translate="nav.pricing">Pricing</a>
                <a href="#docs" class="text-gray-700 text-base font-normal hover:text-green-500 transition-colors" onclick="handleNavigation(this); return false;" data-translate="nav.docs">Docs</a>
                <a href="#contact" class="text-gray-700 text-base font-normal hover:text-green-500 transition-colors" onclick="handleNavigation(this); return false;" data-translate="nav.contact">Contact</a>
            </nav>
            
            <!-- Language Selector & CTA Button -->
            <div class="hidden lg:flex items-center space-x-4">
                <!-- Language Selector -->
                <div class="flex items-center gap-4">
                    <!-- Language Icon (Globe) -->
                    <i data-feather="globe" class="w-5 h-5 text-gray-400"></i>
                    
                    <!-- Custom Language Button & Dropdown -->
                    <div class="relative">
                        <button type="button" 
                                class="flex items-center justify-between w-[140px] px-4 py-2 text-gray-700 bg-white border border-green-500 rounded-lg hover:bg-gray-50 transition-colors"
                                onclick="toggleLanguageDropdown()"
                                id="language-selector">
                            <span id="current-language" class="text-base font-normal">English</span>
                            <svg class="w-4 h-4 transition-transform text-gray-900" id="language-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        
                        <!-- Language Dropdown -->
                        <div class="absolute top-full left-0 mt-1 w-[140px] bg-white border border-gray-200 rounded-lg shadow-lg opacity-0 invisible transition-all duration-200 z-50"
                             id="language-dropdown">
                            <button type="button" 
                                    class="w-full text-left px-4 py-3 text-base text-gray-700 hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg"
                                    onclick="changeLanguage('en')"
                                    id="lang-option-en">
                                English
                            </button>
                            <button type="button" 
                                    class="w-full text-left px-4 py-3 text-base text-gray-700 hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg"
                                    onclick="changeLanguage('pl')"
                                    id="lang-option-pl">
                                Polish
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- CTA Button -->
                <button type="button" class="bg-[#93cd25] text-white px-6 py-2 rounded-lg text-base font-medium hover:bg-[#7fb01f] transition-all duration-200 hover:scale-105 active:scale-95" onclick="handleButtonClick(this)" aria-label="Get started with ESGSyncPRO" data-translate="cta.getStarted">
                    Get Started
                </button>
            </div>
            
            <!-- Mobile Menu Button -->
            <button type="button" 
                    class="lg:hidden flex flex-col justify-center items-center w-10 h-10 rounded-lg bg-gray-100 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-300 transition-all duration-200" 
                    onclick="toggleMobileMenu()"
                    aria-label="Toggle mobile menu"
                    id="mobile-menu-button">
                <span class="block bg-gray-800 transition-all duration-300" 
                      id="burger-line-1" 
                      style="width: 20px; height: 2px; margin: 2px 0;"></span>
                <span class="block bg-gray-800 transition-all duration-300" 
                      id="burger-line-2" 
                      style="width: 20px; height: 2px; margin: 2px 0;"></span>
                <span class="block bg-gray-800 transition-all duration-300" 
                      id="burger-line-3" 
                      style="width: 20px; height: 2px; margin: 2px 0;"></span>
            </button>
        </div>
        
        <!-- Mobile Navigation Menu -->
        <div class="lg:hidden absolute top-full left-0 w-full bg-white border-b border-gray-200 shadow-lg mobile-menu-transition transform translate-y-0 opacity-100 z-50" 
             id="mobile-menu" style="transform: translateY(-100%); opacity: 0; visibility: hidden;">
            <nav class="px-6 py-6 space-y-4" role="navigation">
                <a href="#home" class="block text-gray-700 text-lg font-normal hover:text-green-500 transition-colors py-2" onclick="handleMobileNavigation(this); return false;" data-translate="nav.home">Home</a>
                <a href="#features" class="block text-gray-700 text-lg font-normal hover:text-green-500 transition-colors py-2" onclick="handleMobileNavigation(this); return false;" data-translate="nav.features">Features</a>
                <a href="#pricing" class="block text-gray-700 text-lg font-normal hover:text-green-500 transition-colors py-2" onclick="handleMobileNavigation(this); return false;" data-translate="nav.pricing">Pricing</a>
                <a href="#docs" class="block text-gray-700 text-lg font-normal hover:text-green-500 transition-colors py-2" onclick="handleMobileNavigation(this); return false;" data-translate="nav.docs">Docs</a>
                <a href="#contact" class="block text-gray-700 text-lg font-normal hover:text-green-500 transition-colors py-2" onclick="handleMobileNavigation(this); return false;" data-translate="nav.contact">Contact</a>
                
                <!-- Mobile Language Selector -->
                <div class="border-t border-gray-200 pt-4">
                    <div class="text-sm font-medium text-gray-500 mb-2" data-translate="language.select">Language</div>
                    <div class="space-y-2">
                        <button type="button" 
                                class="mobile-language-button w-full text-left px-3 py-2 text-gray-700 hover:bg-gray-50 rounded-lg transition-colors"
                                onclick="changeLanguage('en')"
                                id="mobile-lang-option-en">
                            English
                        </button>
                        <button type="button" 
                                class="mobile-language-button w-full text-left px-3 py-2 text-gray-700 hover:bg-gray-50 rounded-lg transition-colors"
                                onclick="changeLanguage('pl')"
                                id="mobile-lang-option-pl">
                            Polish
                        </button>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section id="home" class="min-h-[500px] py-12" style="background: linear-gradient(90deg, #f9fafb 0%, #ffffff 100%)">
        <div class="flex flex-col items-center justify-center h-full px-6 md:px-12 lg:px-28 gap-8 lg:gap-12">
            <!-- Text Content -->
            <div class="flex flex-col w-full max-w-4xl text-center">
                <h1 class="text-4xl md:text-5xl lg:text-[60px] font-bold leading-tight lg:leading-[60px] mb-6 lg:mb-8">
                    <span class="text-gray-900" data-translate="hero.title.part1">Transform Fuel Data into</span>
                    <span class="text-[#91cb24]" data-translate="hero.title.part2"> CO₂e KPIs</span>
                </h1>
                
                <p class="text-lg md:text-xl text-gray-600 leading-relaxed lg:leading-[33px] mb-8 max-w-[573px] mx-auto" data-translate="hero.subtitle">
                    Instantly convert fuel data into CO₂e KPIs with our advanced emission calculation platform. Accurate, scalable, and developer-friendly.
                </p>
                
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <button type="button" class="bg-[#95ce24] text-white px-6 md:px-8 py-3 md:py-4 rounded-lg text-base md:text-lg font-semibold hover:bg-[#7fb01f] transition-all duration-200 hover:scale-105 active:scale-95" onclick="handleButtonClick(this)" aria-label="Try demo" data-translate="cta.tryDemo">
                        Try Demo
                    </button>
                    <button type="button" class="border-2 border-gray-300 text-gray-700 px-6 md:px-8 py-3 md:py-4 rounded-lg text-base md:text-lg font-semibold hover:border-gray-400 transition-all duration-200 hover:scale-105 active:scale-95" onclick="handleButtonClick(this)" aria-label="View documentation" data-translate="cta.viewDocs">
                        View Docs
                    </button>
                </div>
            </div>
            
            <!-- Bottom Video -->
            <div class="w-full flex justify-center flex-shrink-0 px-6 md:px-12 lg:px-28">
                <div class="custom-video-container rounded-2xl shadow-lg overflow-hidden">
                    <video 
                        id="hero-video"
                        class="custom-video" 
                        loop 
                        playsinline>
                        <source id="video-source" type="video/mp4">
                        <!-- Fallback image if video doesn't load -->
                        <img src="assets/images/img_img.png" alt="ESGSyncPRO Dashboard Preview" class="hero-video-fullwidth rounded-2xl shadow-lg object-cover flex-shrink-0" />
                    </video>
                    
                    <!-- Custom Controls -->
                    <div class="custom-controls">
                        <!-- Play/Pause Button -->
                        <button class="control-btn" id="play-pause-btn" onclick="togglePlayPause()">
                            <svg id="play-icon" viewBox="0 0 24 24">
                                <path d="M8 5v14l11-7z"/>
                            </svg>
                            <svg id="pause-icon" viewBox="0 0 24 24" style="display: none;">
                                <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
                            </svg>
                        </button>
                        
                        <!-- Progress Bar -->
                        <div class="progress-container" onclick="setProgress(event)">
                            <div class="progress-bar" id="progress-bar"></div>
                        </div>
                        
                        <!-- Time Display -->
                        <div class="time-display" id="time-display">0:00 / 0:00</div>
                        
                        <!-- Volume Controls -->
                        <div class="volume-container">
                            <button class="control-btn" id="volume-btn" onclick="toggleMute()">
                                <svg id="volume-icon" viewBox="0 0 24 24">
                                    <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
                                </svg>
                                <svg id="mute-icon" viewBox="0 0 24 24" style="display: none;">
                                    <path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/>
                                </svg>
                            </button>
                            <div class="volume-slider" onclick="setVolume(event)">
                                <div class="volume-progress" id="volume-progress"></div>
                            </div>
                        </div>
                        
                        <!-- Fullscreen Button -->
                        <button class="fullscreen-btn" onclick="toggleFullscreen()">
                            <svg viewBox="0 0 24 24">
                                <path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Key Benefits Section -->
    <section id="features" class="bg-white py-12 md:py-16 lg:py-20">
        <div class="px-6 md:px-12 lg:px-28">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-bold text-gray-900 mb-4" data-translate="benefits.title">Key Benefits</h2>
                <p class="text-xl text-gray-600" data-translate="benefits.subtitle">Everything you need for accurate emission calculations</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                <!-- High Performance -->
                <div class="text-center">
                    <div class="bg-emerald-500/10 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-6">
                        <img src="assets/images/img_i.svg" alt="Performance Icon" class="w-6 h-8" />
                    </div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-4" data-translate="benefits.performance.title">High Performance</h3>
                    <p class="text-base text-gray-600 leading-6" data-translate="benefits.performance.description">Process millions of fuel records in seconds with our optimized calculation engine.</p>
                </div>
                
                <!-- Pinpoint Accuracy -->
                <div class="text-center">
                    <div class="bg-emerald-500/10 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-6">
                        <img src="assets/images/img_i.svg" alt="Accuracy Icon" class="w-6 h-8" />
                    </div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-4" data-translate="benefits.accuracy.title">Pinpoint Accuracy</h3>
                    <p class="text-base text-gray-600 leading-6" data-translate="benefits.accuracy.description">Industry-standard emission factors ensure precise CO₂e calculations every time.</p>
                </div>
                
                <!-- Infinite Scalability -->
                <div class="text-center">
                    <div class="bg-emerald-500/10 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-6">
                        <img src="assets/images/img_i.svg" alt="Scalability Icon" class="w-6 h-8" />
                    </div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-4" data-translate="benefits.scalability.title">Infinite Scalability</h3>
                    <p class="text-base text-gray-600 leading-6" data-translate="benefits.scalability.description">From startups to enterprises, our platform scales with your growing data needs.</p>
                </div>
                
                <!-- Open API -->
                <div class="text-center">
                    <div class="bg-emerald-500/10 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-6">
                        <img src="assets/images/img_i.svg" alt="API Icon" class="w-6 h-8" />
                    </div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-4" data-translate="benefits.api.title">Open API</h3>
                    <p class="text-base text-gray-600 leading-6" data-translate="benefits.api.description">RESTful API with comprehensive documentation for seamless integration.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- How It Works Section -->
    <section class="bg-gray-50 py-12 md:py-16 lg:py-20">
        <div class="px-6 md:px-12 lg:px-28">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-bold text-gray-900 mb-4" data-translate="howItWorks.title">How It Works</h2>
                <p class="text-xl text-gray-600" data-translate="howItWorks.subtitle">Three simple steps to emission insights</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
                <!-- Step 1 -->
                <div class="text-center">
                    <div class="bg-[#95ce24] rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-6">
                        <span class="text-2xl font-bold text-white">1</span>
                    </div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-4" data-translate="howItWorks.step1.title">Upload Data</h3>
                    <p class="text-base text-gray-600 leading-6" data-translate="howItWorks.step1.description">Upload your fuel consumption data via CSV, Excel, or call our API directly from your systems.</p>
                </div>
                
                <!-- Step 2 -->
                <div class="text-center">
                    <div class="bg-[#95ce24] rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-6">
                        <span class="text-2xl font-bold text-white">2</span>
                    </div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-4" data-translate="howItWorks.step2.title">Compute Emissions</h3>
                    <p class="text-base text-gray-600 leading-6" data-translate="howItWorks.step2.description">Our engine automatically calculates CO₂e values using the latest emission factors and methodologies.</p>
                </div>
                
                <!-- Step 3 -->
                <div class="text-center">
                    <div class="bg-[#95ce24] rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-6">
                        <span class="text-2xl font-bold text-white">3</span>
                    </div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-4" data-translate="howItWorks.step3.title">Visualize & Export</h3>
                    <p class="text-base text-gray-600 leading-6" data-translate="howItWorks.step3.description">Get interactive dashboards and export results in multiple formats for reporting and analysis.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Try It Now Section -->
    <section class="bg-white py-12 md:py-16 lg:py-20">
        <div class="px-6 md:px-12 lg:px-28">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-bold text-gray-900 mb-4" data-translate="calculator.title">Try It Now</h2>
                <p class="text-xl text-gray-600" data-translate="calculator.subtitle">Calculate emissions instantly, no signup required</p>
            </div>
            
            <div class="max-w-4xl mx-auto bg-gray-50 rounded-2xl p-8">
                <form class="space-y-6" onsubmit="handleFormSubmit(event)">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Fuel Type Dropdown -->
                        <div>
                            <label for="fuel-type" class="block text-sm font-medium text-gray-700 mb-2" data-translate="calculator.fuelType">Fuel Type</label>
                            <div class="relative">
                                <select id="fuel-type" name="fuel-type" class="w-full bg-white border border-gray-300 rounded-lg px-4 py-3 text-base appearance-none cursor-pointer pr-10 form-input" onchange="handleDropdownChange(this)" aria-label="Select fuel type">
                                    <option value="gasoline" selected data-translate-option="calculator.fuelTypes.gasoline">Gasoline (2.31 kg CO₂e/L)</option>
                                    <option value="diesel" data-translate-option="calculator.fuelTypes.diesel">Diesel (2.68 kg CO₂e/L)</option>
                                    <option value="natural-gas" data-translate-option="calculator.fuelTypes.naturalGas">Natural Gas (1.87 kg CO₂e/L)</option>
                                    <option value="propane" data-translate-option="calculator.fuelTypes.propane">Propane (1.54 kg CO₂e/L)</option>
                                </select>
                                <div class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none">
                                    <img src="assets/images/img_arrowdown.svg" alt="Dropdown arrow" class="w-8 h-8" />
                                </div>
                            </div>
                        </div>
                        
                        <!-- Consumption Input -->
                        <div>
                            <label for="consumption" class="block text-sm font-medium text-gray-700 mb-2" data-translate="calculator.consumption">Consumption (Liters)</label>
                            <input type="number" id="consumption" name="consumption" placeholder="1000" min="0.1" step="0.1" class="w-full bg-white border border-gray-300 rounded-lg px-4 py-3 text-base form-input" onchange="handleInputChange(this)" oninput="handleInputChange(this)" aria-label="Enter fuel consumption in liters" data-translate-placeholder="calculator.consumptionPlaceholder" />
                        </div>
                    </div>
                    
                    <!-- Calculate Button -->
                    <button type="submit" class="w-full bg-[#95ce24] text-white py-4 rounded-lg text-lg font-semibold hover:bg-[#7fb01f] transition-all duration-200 hover:scale-105 active:scale-95" aria-label="Calculate CO₂e emissions" data-translate="calculator.calculate">
                        Calculate CO₂e Emissions
                    </button>
                    
                    <!-- Results -->
                    <div class="bg-white border-2 border-emerald-500/20 rounded-lg p-6 text-center result-container">
                        <div class="text-3xl font-bold text-[#91cb24] mb-2">2.31 tonnes CO₂e</div>
                        <div class="text-base text-gray-600" data-translate="calculator.defaultMessage">Enter values above to calculate emissions</div>
                        <div class="text-sm text-gray-500 mt-2" data-translate="calculator.basedOn">
                            Based on standard emission factors
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- Pricing Plans Section -->
    <section id="pricing" class="bg-gray-50 py-12 md:py-16 lg:py-20">
        <div class="px-6 md:px-12 lg:px-20">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-bold text-gray-900 mb-4" data-translate="pricing.title">Pricing Plans</h2>
                <p class="text-xl text-gray-600" data-translate="pricing.subtitle">Choose the plan that fits your needs</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto">
                <!-- Free Plan -->
                <div class="bg-white border border-gray-200 rounded-2xl p-8">
                    <h3 class="text-2xl font-bold text-gray-900 mb-4" data-translate="pricing.free.title">Free</h3>
                    <div class="flex items-baseline mb-6">
                        <span class="text-4xl font-bold text-gray-900">$0</span>
                        <span class="text-lg font-bold text-gray-600 ml-2" data-translate="pricing.perMonth">/month</span>
                    </div>
                    
                    <ul class="space-y-4 mb-8">
                        <li class="flex items-center">
                            <img src="assets/images/img_frame.svg" alt="Check" class="w-4 h-4 mr-3" />
                            <span class="text-base text-black" data-translate="pricing.free.feature1">1,000 calculations/month</span>
                        </li>
                        <li class="flex items-center">
                            <img src="assets/images/img_frame.svg" alt="Check" class="w-4 h-4 mr-3" />
                            <span class="text-base text-black" data-translate="pricing.free.feature2">Basic fuel types</span>
                        </li>
                        <li class="flex items-center">
                            <img src="assets/images/img_frame.svg" alt="Check" class="w-4 h-4 mr-3" />
                            <span class="text-base text-black" data-translate="pricing.free.feature3">API access</span>
                        </li>
                    </ul>
                    
                    <button type="button" class="w-full border-2 border-gray-300 text-gray-700 py-3 rounded-lg text-base font-semibold hover:border-gray-400 transition-all duration-200 hover:scale-105 active:scale-95" onclick="handleButtonClick(this)" aria-label="Get started with free plan" data-translate="cta.getStarted">
                        Get Started
                    </button>
                </div>
                
                <!-- Pro Plan -->
                <div class="relative">
                    <!-- Most Popular Badge -->
                    <div class="absolute -top-3 left-1/2 transform -translate-x-1/2">
                        <div class="bg-[#95ce24] text-white px-4 py-1 rounded-full text-sm font-medium" data-translate="pricing.mostPopular">
                            Most Popular
                        </div>
                    </div>
                    
                    <div class="bg-white border-2 border-[#91cb24] rounded-2xl p-8">
                        <h3 class="text-2xl font-bold text-gray-900 mb-4" data-translate="pricing.pro.title">Pro</h3>
                        <div class="flex items-baseline mb-6">
                            <span class="text-4xl font-bold text-gray-900">$99</span>
                            <span class="text-lg font-bold text-gray-600 ml-2" data-translate="pricing.perMonth">/month</span>
                        </div>
                        
                        <ul class="space-y-4 mb-8">
                            <li class="flex items-center">
                                <img src="assets/images/img_frame.svg" alt="Check" class="w-4 h-4 mr-3" />
                                <span class="text-base text-black" data-translate="pricing.pro.feature1">100,000 calculations/month</span>
                            </li>
                            <li class="flex items-center">
                                <img src="assets/images/img_frame.svg" alt="Check" class="w-4 h-4 mr-3" />
                                <span class="text-base text-black" data-translate="pricing.pro.feature2">All fuel types</span>
                            </li>
                            <li class="flex items-center">
                                <img src="assets/images/img_frame.svg" alt="Check" class="w-4 h-4 mr-3" />
                                <span class="text-base text-black" data-translate="pricing.pro.feature3">Advanced analytics</span>
                            </li>
                            <li class="flex items-center">
                                <img src="assets/images/img_frame.svg" alt="Check" class="w-4 h-4 mr-3" />
                                <span class="text-base text-black" data-translate="pricing.pro.feature4">Priority support</span>
                            </li>
                        </ul>
                        
                        <button type="button" class="w-full bg-[#95ce24] text-white py-3 rounded-lg text-base font-semibold hover:bg-[#7fb01f] transition-all duration-200 hover:scale-105 active:scale-95" onclick="handleButtonClick(this)" aria-label="Start free trial" data-translate="cta.startFreeTrial">
                            Start Free Trial
                        </button>
                    </div>
                </div>
                
                <!-- Enterprise Plan -->
                <div class="bg-white border border-gray-200 rounded-2xl p-8">
                    <h3 class="text-2xl font-bold text-gray-900 mb-4" data-translate="pricing.enterprise.title">Enterprise</h3>
                    <div class="text-4xl font-bold text-gray-900 mb-6" data-translate="pricing.custom">Custom</div>
                    
                    <ul class="space-y-4 mb-8">
                        <li class="flex items-center">
                            <img src="assets/images/img_frame.svg" alt="Check" class="w-4 h-4 mr-3" />
                            <span class="text-base text-black" data-translate="pricing.enterprise.feature1">Unlimited calculations</span>
                        </li>
                        <li class="flex items-center">
                            <img src="assets/images/img_frame.svg" alt="Check" class="w-4 h-4 mr-3" />
                            <span class="text-base text-black" data-translate="pricing.enterprise.feature2">Custom integrations</span>
                        </li>
                        <li class="flex items-center">
                            <img src="assets/images/img_frame.svg" alt="Check" class="w-4 h-4 mr-3" />
                            <span class="text-base text-black" data-translate="pricing.enterprise.feature3">Dedicated support</span>
                        </li>
                        <li class="flex items-center">
                            <img src="assets/images/img_frame.svg" alt="Check" class="w-4 h-4 mr-3" />
                            <span class="text-base text-black" data-translate="pricing.enterprise.feature4">SLA guarantee</span>
                        </li>
                    </ul>
                    
                    <button type="button" class="w-full border-2 border-gray-300 text-gray-700 py-3 rounded-lg text-base font-semibold hover:border-gray-400 transition-all duration-200 hover:scale-105 active:scale-95" onclick="handleButtonClick(this)" aria-label="Contact sales team" data-translate="cta.contactSales">
                        Contact Sales
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Anchor points for navigation -->
    <div id="docs" class="invisible h-0"></div>
    <div id="about" class="invisible h-0"></div>
    <div id="privacy" class="invisible h-0"></div>

    <!-- Email capture / ESG assessment CTA -->
    <section id="esg-email" class="py-20 md:py-24 bg-gradient-to-b from-white to-gray-50">
        <div class="px-6 md:px-12 lg:px-28">
            <div class="max-w-4xl mx-auto text-center">
                <div class="inline-flex items-center justify-center px-3 py-1 rounded-full text-xs font-medium bg-emerald-50 text-emerald-700 mb-4">
                    ESGSyncPRO
                </div>
                <h2 class="text-3xl md:text-5xl font-bold text-gray-900 leading-tight mb-4 typing-headline">
                    <span id="typed-headline"></span><span class="typing-caret"></span>
                </h2>
                <p id="esg-subtitle" class="text-base md:text-xl text-gray-600 leading-relaxed mb-8" data-translate="esgEmail.subtitle">
                    Answer 26 questions → get a personalized PDF with a benchmark in 24h. No commitment.
                </p>
                <form id="lead-form" class="flex flex-col sm:flex-row items-stretch gap-3 justify-center max-w-3xl mx-auto" method="POST" target="lead-target">
                    <input 
                        id="lead-email" 
                        name="email" 
                        type="email" 
                        autocomplete="email"
                        required
                        data-translate-placeholder="esgEmail.emailPlaceholder"
                        placeholder="Email address"
                        class="flex-1 min-w-0 border border-gray-200 bg-white rounded-xl px-4 py-3 md:py-4 text-base md:text-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#91cb24] focus:border-[#91cb24] shadow-sm" />
                    <button 
                        id="lead-submit"
                        type="submit" 
                        class="whitespace-nowrap bg-[#95ce24] text-white px-6 md:px-8 py-3 md:py-4 rounded-xl text-base md:text-lg font-semibold hover:bg-[#7fb01f] transition-all duration-200 hover:scale-105 active:scale-95 shadow-sm">
                        <span data-translate="esgEmail.cta">Start ESG assessment</span>
                    </button>
                </form>
                <iframe name="lead-target" id="lead-target" style="display:none"></iframe>
                <div class="text-[11px] md:text-xs text-gray-500 mt-10">
                    <span data-translate="esgEmail.disclaimer">You can unsubscribe at any time (STOP).</span> <a href="#privacy" class="underline" data-translate="footer.privacy">Privacy Policy</a>.
                </div>
                
            </div>
        </div>
    </section>

    <!-- Survey Modal -->
    <div id="survey-modal" class="modal-overlay" aria-hidden="true" role="dialog" aria-modal="true">
        <div class="modal-content" role="document">
            <div class="modal-header">
                <div class="text-lg font-bold text-gray-900" data-translate="survey.title">Szybka ocena ESG</div>
                <button id="survey-close" class="btn btn-secondary" type="button" data-translate="survey.buttons.close">Zamknij</button>
            </div>
            <div class="modal-body">
                <div id="survey-step-consent" class="q-group">
                    <div class="q-title" data-translate="survey.consent.title">Czy chcesz przejść szybki test ESG?</div>
                    <div class="q-sub" data-translate="survey.consent.subtitle">Zajmie ~3–5 minut. Po zakończeniu zobaczysz wynik i benchmark.</div>
                    <div class="mt-4" style="display:flex; gap: 10px; flex-wrap: wrap;">
                        <button type="button" id="survey-start" class="btn btn-primary" data-translate="survey.buttons.yesStart">Tak, rozpocznij</button>
                        <button type="button" id="survey-skip" class="btn btn-secondary" data-translate="survey.buttons.noLater">Nie teraz</button>
                    </div>
                </div>

                <form id="survey-form" style="display:none;">
                    <!-- 1. Profil firmy (no points) -->
                    <div class="q-group">
                        <div class="q-title" data-translate="survey.sections.profile.title">1. Profil firmy</div>
                        <div class="q-row">
                            <div class="q-field">
                                <label data-translate="survey.profile.industry">Branża</label>
                                <select class="q-select" name="industry">
                                    <option value="manufacturing" data-translate-option="survey.profile.industry.options.manufacturing">Produkcja</option>
                                    <option value="services" data-translate-option="survey.profile.industry.options.services">Usługi</option>
                                    <option value="it" data-translate-option="survey.profile.industry.options.it">IT / Software</option>
                                    <option value="retail" data-translate-option="survey.profile.industry.options.retail">Handel</option>
                                    <option value="transport" data-translate-option="survey.profile.industry.options.transport">Transport / Logistyka</option>
                                    <option value="other" data-translate-option="survey.profile.industry.options.other">Inna</option>
                                </select>
                            </div>
                            <div class="q-field">
                                <label data-translate="survey.profile.employees">Liczba pracowników</label>
                                <select class="q-select" name="employees">
                                    <option data-translate-option="survey.profile.employees.options.1_10">1–10</option>
                                    <option data-translate-option="survey.profile.employees.options.11_50">11–50</option>
                                    <option data-translate-option="survey.profile.employees.options.51_250">51–250</option>
                                    <option data-translate-option="survey.profile.employees.options.251_500">251–500</option>
                                    <option data-translate-option="survey.profile.employees.options.500_plus">500+</option>
                                </select>
                            </div>
                            <div class="q-field">
                                <label data-translate="survey.profile.country">Kraj głównych operacji</label>
                                <input class="q-input" id="country-input" name="country" data-translate-placeholder="survey.profile.country" placeholder="Polska" readonly />
                                <div class="country-dropdown" id="country-dropdown" style="display:none; position:relative;">
                                    <div id="country-list" style="position:absolute; z-index:20; background:#fff; border:1px solid #e5e7eb; border-radius:8px; box-shadow:0 6px 20px rgba(0,0,0,0.1); max-height:240px; overflow:auto; width:100%;"></div>
                                </div>
                            </div>
                            <div class="q-field">
                                <label data-translate="survey.profile.revenue">Roczny przychód</label>
                                <select class="q-select" name="revenue">
                                    <option data-translate-option="survey.profile.revenue.options.lt1">< 1 mln EUR</option>
                                    <option data-translate-option="survey.profile.revenue.options.1_10">1–10 mln EUR</option>
                                    <option data-translate-option="survey.profile.revenue.options.10_50">10–50 mln EUR</option>
                                    <option data-translate-option="survey.profile.revenue.options.50_250">50–250 mln EUR</option>
                                    <option data-translate-option="survey.profile.revenue.options.250_plus">250 mln EUR+</option>
                                </select>
                            </div>
                            <div class="q-field">
                                <label data-translate="survey.profile.csrd">Podleganie obowiązkowi CSRD</label>
                                <select class="q-select" name="csrd">
                                    <option data-translate-option="survey.profile.csrd.options.yes">Tak</option>
                                    <option data-translate-option="survey.profile.csrd.options.no">Nie</option>
                                    <option data-translate-option="survey.profile.csrd.options.unknown">Nie wiem</option>
                                </select>
                            </div>
                            <div class="q-field">
                                <label data-translate="survey.profile.level">Raportowanie na poziomie</label>
                                <select class="q-select" name="scopeLevel">
                                    <option data-translate-option="survey.profile.level.options.single">Pojedynczej jednostki</option>
                                    <option data-translate-option="survey.profile.level.options.group">Grupy kapitałowej</option>
                                    <option data-translate-option="survey.profile.level.options.both">Oba</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- 2. E -->
                    <div class="q-group">
                        <div class="q-title" data-translate="survey.sections.e.title">2. Środowisko (E)</div>
                        <div class="q-field">
                            <label data-translate="survey.e.energy">Czy monitorujesz zużycie energii?</label>
                            <div class="q-radio-row">
                                <label><input type="radio" name="e_energy" value="5"> <span data-translate="survey.opt.yes_5">Tak</span></label>
                                <label><input type="radio" name="e_energy" value="3"> <span data-translate="survey.opt.partial_3">Częściowo</span></label>
                                <label><input type="radio" name="e_energy" value="0"> <span data-translate="survey.opt.no_0">Nie</span></label>
                            </div>
                        </div>
                        <div class="q-field">
                            <label data-translate="survey.e.co2">Czy monitorujesz emisje CO₂ / ślad węglowy?</label>
                            <div class="q-radio-row">
                                <label><input type="radio" name="e_co2" value="5"> <span data-translate="survey.opt.yes_5">Tak</span></label>
                                <label><input type="radio" name="e_co2" value="3"> <span data-translate="survey.opt.partial_3">Częściowo</span></label>
                                <label><input type="radio" name="e_co2" value="0"> <span data-translate="survey.opt.no_0">Nie</span></label>
                            </div>
                        </div>
                        <div class="q-field">
                            <label data-translate="survey.e.scopes">Zakresy emisji w raportowaniu</label>
                            <div class="q-radio-row">
                                <label><input type="radio" name="e_scopes" value="5"> <span data-translate="survey.opt.scopes_123_5">Scope 1, 2 i 3</span></label>
                                <label><input type="radio" name="e_scopes" value="3"> <span data-translate="survey.opt.scopes_12_3">Scope 1 i 2</span></label>
                                <label><input type="radio" name="e_scopes" value="1"> <span data-translate="survey.opt.scopes_1_1">Scope 1</span></label>
                                <label><input type="radio" name="e_scopes" value="0"> <span data-translate="survey.opt.scopes_none_0">Żaden</span></label>
                            </div>
                        </div>
                        <div class="q-field">
                            <label data-translate="survey.e.ren">Udział OZE w zużyciu (%)</label>
                            <div class="q-radio-row">
                                <label><input type="radio" name="e_res" value="5"> <span data-translate="survey.opt.ren_50_100_5">50–100%</span></label>
                                <label><input type="radio" name="e_res" value="3"> <span data-translate="survey.opt.ren_20_49_3">20–49%</span></label>
                                <label><input type="radio" name="e_res" value="1"> <span data-translate="survey.opt.ren_1_19_1">1–19%</span></label>
                                <label><input type="radio" name="e_res" value="0"> <span data-translate="survey.opt.ren_0_0">0%</span></label>
                            </div>
                        </div>
                        <div class="q-field">
                            <label data-translate="survey.e.policy">Czy masz formalną politykę środowiskową?</label>
                            <div class="q-radio-row">
                                <label><input type="radio" name="e_policy" value="5"> <span data-translate="survey.opt.yes_5">Tak</span></label>
                                <label><input type="radio" name="e_policy" value="3"> <span data-translate="survey.opt.inprogress_3">W trakcie tworzenia</span></label>
                                <label><input type="radio" name="e_policy" value="0"> <span data-translate="survey.opt.no_0">Nie</span></label>
                            </div>
                        </div>
                    </div>

                    <!-- 3. S -->
                    <div class="q-group">
                        <div class="q-title" data-translate="survey.sections.s.title">3. Społeczne (S)</div>
                        <div class="q-field">
                            <label data-translate="survey.s.dei">Polityka DEI</label>
                            <div class="q-radio-row">
                                <label><input type="radio" name="s_dei" value="5"> <span data-translate="survey.opt.yes_5">Tak</span></label>
                                <label><input type="radio" name="s_dei" value="0"> <span data-translate="survey.opt.no_0">Nie</span></label>
                            </div>
                        </div>
                        <div class="q-field">
                            <label data-translate="survey.s.hr">Raportowanie danych HR</label>
                            <div class="q-radio-row">
                                <label><input type="radio" name="s_hr" value="5"> <span data-translate="survey.opt.yes_5">Tak</span></label>
                                <label><input type="radio" name="s_hr" value="3"> <span data-translate="survey.opt.partial_3">Częściowo</span></label>
                                <label><input type="radio" name="s_hr" value="0"> <span data-translate="survey.opt.no_0">Nie</span></label>
                            </div>
                        </div>
                        <div class="q-field">
                            <label data-translate="survey.s.whistle">Whistleblowing</label>
                            <div class="q-radio-row">
                                <label><input type="radio" name="s_whistle" value="5"> <span data-translate="survey.opt.yes_5">Tak</span></label>
                                <label><input type="radio" name="s_whistle" value="0"> <span data-translate="survey.opt.no_0">Nie</span></label>
                            </div>
                        </div>
                        <div class="q-field">
                            <label data-translate="survey.s.incidents">Monitorowanie wypadkowości</label>
                            <div class="q-radio-row">
                                <label><input type="radio" name="s_incidents" value="5"> <span data-translate="survey.opt.yes_5">Tak</span></label>
                                <label><input type="radio" name="s_incidents" value="3"> <span data-translate="survey.opt.partial_3">W planach</span></label>
                                <label><input type="radio" name="s_incidents" value="0"> <span data-translate="survey.opt.no_0">Nie</span></label>
                            </div>
                        </div>
                        <div class="q-field">
                            <label data-translate="survey.s.training">Średnia liczba godzin szkoleń / prac.</label>
                            <div class="q-radio-row">
                                <label><input type="radio" name="s_training" value="5"> <span data-translate="survey.opt.training_21_5">21+</span></label>
                                <label><input type="radio" name="s_training" value="3"> <span data-translate="survey.opt.training_11_20_3">11–20</span></label>
                                <label><input type="radio" name="s_training" value="1"> <span data-translate="survey.opt.training_1_10_1">1–10</span></label>
                                <label><input type="radio" name="s_training" value="0"> <span data-translate="survey.opt.training_0_0">0</span></label>
                            </div>
                        </div>
                    </div>

                    <!-- 4. G -->
                    <div class="q-group">
                        <div class="q-title" data-translate="survey.sections.g.title">4. Ład korporacyjny (G)</div>
                        <div class="q-field">
                            <label data-translate="survey.g.risk">Regularna ocena ryzyk ESG przez zarząd</label>
                            <div class="q-radio-row">
                                <label><input type="radio" name="g_risk" value="5"> <span data-translate="survey.opt.yes_5">Tak</span></label>
                                <label><input type="radio" name="g_risk" value="3"> <span data-translate="survey.opt.dontknow_3">Nie wiem</span></label>
                                <label><input type="radio" name="g_risk" value="0"> <span data-translate="survey.opt.no_0">Nie</span></label>
                            </div>
                        </div>
                        <div class="q-field">
                            <label data-translate="survey.g.pay">Powiązanie wynagrodzeń z KPI ESG</label>
                            <div class="q-radio-row">
                                <label><input type="radio" name="g_pay" value="5"> <span data-translate="survey.opt.yes_5">Tak (5)</span></label>
                                <label><input type="radio" name="g_pay" value="3"> <span data-translate="survey.opt.partial_3">W planach (3)</span></label>
                                <label><input type="radio" name="g_pay" value="0"> <span data-translate="survey.opt.no_0">Nie (0)</span></label>
                            </div>
                        </div>
                        <div class="q-field">
                            <label data-translate="survey.g.owner">Formalny właściciel/komitet ESG</label>
                            <div class="q-radio-row">
                                <label><input type="radio" name="g_owner" value="5"> <span data-translate="survey.opt.yes_5">Tak (5)</span></label>
                                <label><input type="radio" name="g_owner" value="0"> <span data-translate="survey.opt.no_0">Nie (0)</span></label>
                            </div>
                        </div>
                        <div class="q-field">
                            <label data-translate="survey.g.qc">Kontrole jakości danych ESG</label>
                            <div class="q-radio-row">
                                <label><input type="radio" name="g_qc" value="5"> <span data-translate="survey.opt.yes_5">Tak (5)</span></label>
                                <label><input type="radio" name="g_qc" value="0"> <span data-translate="survey.opt.no_0">Nie (0)</span></label>
                            </div>
                        </div>
                    </div>

                    <!-- 5. Supply -->
                    <div class="q-group">
                        <div class="q-title" data-translate="survey.sections.sup.title">5. Łańcuch dostaw i dane</div>
                        <div class="q-field">
                            <label data-translate="survey.sup.count">Ilu masz dostawców? (liczba)</label>
                            <input class="q-input" name="sup_count" type="number" min="0" placeholder="np. 42" />
                        </div>
                        <div class="q-field">
                            <label data-translate="survey.sup.coverage">% kluczowych dostawców objętych oceną ESG</label>
                            <div class="q-radio-row">
                                <label><input type="radio" name="sup_coverage" value="5"> <span data-translate="survey.opt.perc_75_5">75%</span></label>
                                <label><input type="radio" name="sup_coverage" value="3"> <span data-translate="survey.opt.perc_25_75_3">25–75%</span></label>
                                <label><input type="radio" name="sup_coverage" value="1"> <span data-translate="survey.opt.perc_lt25_1"><25%</span></label>
                                <label><input type="radio" name="sup_coverage" value="0"> <span data-translate="survey.opt.perc_0_0">0%</span></label>
                            </div>
                        </div>
                        <div class="q-field">
                            <label data-translate="survey.sup.collect">Zbieranie danych od dostawców</label>
                            <div class="q-radio-row">
                                <label><input type="radio" name="sup_collect" value="5"> <span data-translate="survey.opt.yes_5">Tak</span></label>
                                <label><input type="radio" name="sup_collect" value="3"> <span data-translate="survey.opt.partial_3">Częściowo</span></label>
                                <label><input type="radio" name="sup_collect" value="0"> <span data-translate="survey.opt.no_0">Nie</span></label>
                            </div>
                        </div>
                        <div class="q-field">
                            <label data-translate="survey.sup.freq">Częstotliwość zbierania danych ESG</label>
                            <div class="q-radio-row">
                                <label><input type="radio" name="sup_freq" value="5"> <span data-translate="survey.opt.freq_cont_5">Ciągle / bieżąco</span></label>
                                <label><input type="radio" name="sup_freq" value="3"> <span data-translate="survey.opt.freq_q_3">Kwartalnie</span></label>
                                <label><input type="radio" name="sup_freq" value="1"> <span data-translate="survey.opt.freq_y_1">Raz w roku</span></label>
                                <label><input type="radio" name="sup_freq" value="0"> <span data-translate="survey.opt.freq_rare_0">Rzadziej</span></label>
                            </div>
                        </div>
                    </div>

                    <!-- 6. Open (no points) -->
                    <div class="q-group">
                        <div class="q-title" data-translate="survey.sections.open.title">6. Sekcja otwarta</div>
                        <div class="q-field">
                            <label data-translate="survey.open.comment">Dodatkowy komentarz (max 240 znaków)</label>
                            <textarea class="q-textarea" name="open_comment" maxlength="240" placeholder="Co jeszcze jest ważne?"></textarea>
                        </div>
                    </div>
                </form>

                <div id="survey-results" style="display:none;" class="q-group">
                    <div class="q-title" data-translate="survey.result.title">Wynik oceny</div>
                    <div class="result-box">
                        <div id="survey-score-overall" class="text-xl font-bold text-gray-900"></div>
                        <div class="q-sub mt-1"><span data-translate="survey.result.interpretationLabel">Interpretacja</span>: <span id="survey-interpret"></span></div>
                        <div class="result-grid mt-4">
                            <div><span data-translate="survey.result.cat.e">E</span>: <span id="survey-score-e"></span>/25</div>
                            <div><span data-translate="survey.result.cat.s">S</span>: <span id="survey-score-s"></span>/25</div>
                            <div><span data-translate="survey.result.cat.g">G</span>: <span id="survey-score-g"></span>/20</div>
                            <div><span data-translate="survey.result.cat.sup">Łańcuch dostaw</span>: <span id="survey-score-sup"></span>/15</div>
                        </div>
                    </div>
                    
                </div>
            </div>
            <div class="modal-footer">
                <button id="survey-prev" class="btn btn-secondary" type="button" style="display:none;" data-translate="survey.buttons.back">Wstecz</button>
                <button id="survey-submit" class="btn btn-primary" type="button" style="display:none;" data-translate="survey.buttons.finish">Zakończ</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer id="contact" class="bg-gray-900 pt-16 pb-8 md:py-12" role="contentinfo">
        <div class="px-6 md:px-12 lg:px-28">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
                <!-- Company Info -->
                <div class="md:col-span-1">
                    <img src="assets/images/img_div.svg" alt="ESGSyncPRO Logo" class="h-[40px] w-[280px] mb-4" />
                    <p class="text-base text-gray-400 leading-6" data-translate="footer.description">Transform fuel data into actionable emission insights.</p>
                </div>
                
                <!-- Product Links -->
                <div>
                    <h3 class="text-base font-semibold text-white mb-4" data-translate="footer.product">Product</h3>
                    <ul class="space-y-3">
                        <li><a href="#features" class="text-base text-gray-400 hover:text-white transition-colors" onclick="handleNavigation(this); return false;" data-translate="nav.features">Features</a></li>
                        <li><a href="#pricing" class="text-base text-gray-400 hover:text-white transition-colors" onclick="handleNavigation(this); return false;" data-translate="nav.pricing">Pricing</a></li>
                        <li><a href="#docs" class="text-base text-gray-400 hover:text-white transition-colors" onclick="handleNavigation(this); return false;" data-translate="footer.documentation">Documentation</a></li>
                    </ul>
                </div>
                
                <!-- Company Links -->
                <div>
                    <h3 class="text-base font-semibold text-white mb-4" data-translate="footer.company">Company</h3>
                    <ul class="space-y-3">
                        <li><a href="#about" class="text-base text-gray-400 hover:text-white transition-colors" onclick="handleNavigation(this); return false;" data-translate="footer.about">About</a></li>
                        <li><a href="#contact" class="text-base text-gray-400 hover:text-white transition-colors" onclick="handleNavigation(this); return false;" data-translate="nav.contact">Contact</a></li>
                        <li><a href="#privacy" class="text-base text-gray-400 hover:text-white transition-colors" onclick="handleNavigation(this); return false;" data-translate="footer.privacy">Privacy Policy</a></li>
                    </ul>
                </div>
                
                <!-- Social Links -->
                <div>
                    <h3 class="text-base font-semibold text-white mb-4" data-translate="footer.connect">Connect</h3>
                    <div class="flex space-x-4">
                        <a href="#twitter" class="text-gray-400 hover:text-white transition-colors" onclick="handleNavigation(this)" aria-label="Follow us on Twitter">
                            <img src="assets/images/img_frame_blue_gray_300.svg" alt="Twitter" class="w-5 h-5" />
                        </a>
                        <a href="#linkedin" class="text-gray-400 hover:text-white transition-colors" onclick="handleNavigation(this)" aria-label="Follow us on LinkedIn">
                            <img src="assets/images/img_frame_blue_gray_300_20x20.svg" alt="LinkedIn" class="w-5 h-5" />
                        </a>
                        <a href="#github" class="text-gray-400 hover:text-white transition-colors" onclick="handleNavigation(this)" aria-label="View our GitHub">
                            <img src="assets/images/img_frame_blue_gray_300_20x17.svg" alt="GitHub" class="w-5 h-4" />
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Copyright -->
            <div class="border-t border-gray-800 pt-8 text-center">
                <p class="text-base text-gray-400" data-translate="footer.copyright">© 2025 ESGSyncPRO. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Translation System
        const translations = {
            en: {
                // Navigation
                "nav.home": "Home",
                "nav.features": "Features", 
                "nav.pricing": "Pricing",
                "nav.docs": "Docs",
                "nav.contact": "Contact",
                
                // CTA Buttons
                "cta.getStarted": "Get Started",
                "cta.tryDemo": "Try Demo",
                "cta.viewDocs": "View Docs",
                "cta.startFreeTrial": "Start Free Trial",
                "cta.contactSales": "Contact Sales",
                
                // Hero Section
                "hero.title.part1": "Transform Fuel Data into",
                "hero.title.part2": " CO₂e KPIs",
                "hero.subtitle": "Instantly convert fuel data into CO₂e KPIs with our advanced emission calculation platform. Accurate, scalable, and developer-friendly.",
                
                // Benefits Section
                "benefits.title": "Key Benefits",
                "benefits.subtitle": "Everything you need for accurate emission calculations",
                "benefits.performance.title": "High Performance",
                "benefits.performance.description": "Process millions of fuel records in seconds with our optimized calculation engine.",
                "benefits.accuracy.title": "Pinpoint Accuracy",
                "benefits.accuracy.description": "Industry-standard emission factors ensure precise CO₂e calculations every time.",
                "benefits.scalability.title": "Infinite Scalability",
                "benefits.scalability.description": "From startups to enterprises, our platform scales with your growing data needs.",
                "benefits.api.title": "Open API",
                "benefits.api.description": "RESTful API with comprehensive documentation for seamless integration.",
                
                // How It Works Section
                "howItWorks.title": "How It Works",
                "howItWorks.subtitle": "Three simple steps to emission insights",
                "howItWorks.step1.title": "Upload Data",
                "howItWorks.step1.description": "Upload your fuel consumption data via CSV, Excel, or call our API directly from your systems.",
                "howItWorks.step2.title": "Compute Emissions",
                "howItWorks.step2.description": "Our engine automatically calculates CO₂e values using the latest emission factors and methodologies.",
                "howItWorks.step3.title": "Visualize & Export",
                "howItWorks.step3.description": "Get interactive dashboards and export results in multiple formats for reporting and analysis.",
                
                // Calculator Section
                "calculator.title": "Try It Now",
                "calculator.subtitle": "Calculate emissions instantly, no signup required",
                "calculator.fuelType": "Fuel Type",
                "calculator.consumption": "Consumption (Liters)",
                "calculator.consumptionPlaceholder": "1000",
                "calculator.calculate": "Calculate CO₂e Emissions",
                "calculator.defaultMessage": "Enter values above to calculate emissions",
                "calculator.basedOn": "Based on standard emission factors",
                "calculator.fuelTypes.gasoline": "Gasoline (2.31 kg CO₂e/L)",
                "calculator.fuelTypes.diesel": "Diesel (2.68 kg CO₂e/L)",
                "calculator.fuelTypes.naturalGas": "Natural Gas (1.87 kg CO₂e/L)",
                "calculator.fuelTypes.propane": "Propane (1.54 kg CO₂e/L)",
                
                // Pricing Section
                "pricing.title": "Pricing Plans",
                "pricing.subtitle": "Choose the plan that fits your needs",
                "pricing.perMonth": "/month",
                "pricing.mostPopular": "Most Popular",
                "pricing.custom": "Custom",
                "pricing.free.title": "Free",
                "pricing.free.feature1": "1,000 calculations/month",
                "pricing.free.feature2": "Basic fuel types",
                "pricing.free.feature3": "API access",
                "pricing.pro.title": "Pro",
                "pricing.pro.feature1": "100,000 calculations/month",
                "pricing.pro.feature2": "All fuel types",
                "pricing.pro.feature3": "Advanced analytics",
                "pricing.pro.feature4": "Priority support",
                "pricing.enterprise.title": "Enterprise",
                "pricing.enterprise.feature1": "Unlimited calculations",
                "pricing.enterprise.feature2": "Custom integrations",
                "pricing.enterprise.feature3": "Dedicated support",
                "pricing.enterprise.feature4": "SLA guarantee",
                
                // Email CTA (ESG)
                "esgEmail.headline": "Your ESG report sent immediately – without chaos or stress",
                "esgEmail.subtitle": "Answer 26 questions → get a personalized PDF instantly. No commitment.",
                "esgEmail.cta": "Start ESG assessment",
                "esgEmail.emailPlaceholder": "Email address",
                "esgEmail.disclaimer": "You can unsubscribe at any time (STOP).",
                "esgEmail.button.sending": "Sending...",
                "esgEmail.button.sent": "Sent",
                "esgEmail.validation.invalidEmail": "Enter a valid email address.",
                "esgEmail.endpointNotConfigured": "Endpoint is not configured. Please contact support.",
                "esgEmail.successMessage": "Done! Check your inbox — we've sent a link to your report.",
                "esgEmail.errorMessage": "Failed to save the address. Please try again.",

                // Survey modal
                "survey.title": "ESG Quick Assessment",
                "survey.consent.title": "Do you want to take a quick ESG test?",
                "survey.consent.subtitle": "It takes ~3–5 minutes. You'll see your score and a benchmark at the end.",
                "survey.buttons.yesStart": "Yes, start",
                "survey.buttons.noLater": "Not now",
                "survey.buttons.close": "Close",
                "survey.buttons.back": "Back",
                "survey.buttons.next": "Next",
                "survey.buttons.finish": "Finish",
                "survey.validation.fillAll": "Please fill in all fields to continue.",
                "survey.result.thanks.title": "Thank you for completing the test!",
                "survey.result.thanks.subtitle": "Your personalized PDF will arrive in your inbox within 1 minute.",

                "survey.sections.profile.title": "1. Company profile",
                "survey.profile.industry": "Industry",
                "survey.profile.industry.options.manufacturing": "Manufacturing",
                "survey.profile.industry.options.services": "Services",
                "survey.profile.industry.options.it": "IT / Software",
                "survey.profile.industry.options.retail": "Retail",
                "survey.profile.industry.options.transport": "Transport / Logistics",
                "survey.profile.industry.options.other": "Other",
                "survey.profile.employees": "Number of employees",
                "survey.profile.employees.options.1_10": "1–10",
                "survey.profile.employees.options.11_50": "11–50",
                "survey.profile.employees.options.51_250": "51–250",
                "survey.profile.employees.options.251_500": "251–500",
                "survey.profile.employees.options.500_plus": "500+",
                "survey.profile.country": "Main country of operations",
                "survey.profile.revenue": "Annual revenue",
                "survey.profile.revenue.options.lt1": "< 1M EUR",
                "survey.profile.revenue.options.1_10": "1–10M EUR",
                "survey.profile.revenue.options.10_50": "10–50M EUR",
                "survey.profile.revenue.options.50_250": "50–250M EUR",
                "survey.profile.revenue.options.250_plus": "250M EUR+",
                "survey.profile.csrd": "Subject to CSRD",
                "survey.profile.csrd.options.yes": "Yes",
                "survey.profile.csrd.options.no": "No",
                "survey.profile.csrd.options.unknown": "I don't know",
                "survey.profile.level": "Reporting level",
                "survey.profile.level.options.single": "Single entity",
                "survey.profile.level.options.group": "Group",
                "survey.profile.level.options.both": "Both",

                "survey.sections.e.title": "2. Environment (E)",
                "survey.e.energy": "Do you monitor energy consumption?",
                "survey.opt.yes_5": "Yes",
                "survey.opt.partial_3": "Partially",
                "survey.opt.no_0": "No",
                "survey.e.co2": "Do you monitor CO₂/carbon footprint?",
                "survey.e.scopes": "Emission scopes covered",
                "survey.opt.scopes_123_5": "Scope 1, 2 and 3",
                "survey.opt.scopes_12_3": "Scope 1 and 2",
                "survey.opt.scopes_1_1": "Scope 1",
                "survey.opt.scopes_none_0": "None",
                "survey.e.ren": "Share of renewables in consumption (%)",
                "survey.opt.ren_50_100_5": "50–100%",
                "survey.opt.ren_20_49_3": "20–49%",
                "survey.opt.ren_1_19_1": "1–19%",
                "survey.opt.ren_0_0": "0%",
                "survey.e.policy": "Do you have a formal environmental policy?",
                "survey.opt.inprogress_3": "In progress",

                "survey.sections.s.title": "3. Social (S)",
                "survey.s.dei": "DEI policy",
                "survey.s.hr": "Reporting HR data (e.g., turnover, safety)",
                "survey.s.whistle": "Whistleblowing system",
                "survey.s.incidents": "Monitoring incidents (e.g., LTIFR/TRIR)",
                "survey.s.training": "Average training hours per employee per year",
                "survey.opt.training_21_5": "21+",
                "survey.opt.training_11_20_3": "11–20",
                "survey.opt.training_1_10_1": "1–10",
                "survey.opt.training_0_0": "0",

                "survey.sections.g.title": "4. Governance (G)",
                "survey.g.risk": "Board regularly assesses ESG risks",
                "survey.opt.dontknow_3": "I don't know",
                "survey.g.pay": "Management pay linked to ESG KPIs",
                "survey.g.owner": "Formal ESG owner/committee",
                "survey.g.qc": "ESG data quality controls (4-eyes, change logs)",

                "survey.sections.sup.title": "5. Supply chain and data",
                "survey.sup.count": "How many suppliers? (number)",
                "survey.sup.coverage": "% of key suppliers assessed on ESG",
                "survey.opt.perc_75_5": "75%",
                "survey.opt.perc_25_75_3": "25–75%",
                "survey.opt.perc_lt25_1": "<25%",
                "survey.opt.perc_0_0": "0%",
                "survey.sup.collect": "Do you collect ESG data from suppliers?",
                "survey.sup.freq": "How often do you collect ESG data?",
                "survey.opt.freq_cont_5": "Continuous",
                "survey.opt.freq_q_3": "Quarterly",
                "survey.opt.freq_y_1": "Once a year",
                "survey.opt.freq_rare_0": "Less frequently",

                "survey.sections.open.title": "6. Open section",
                "survey.open.comment": "Additional comment (max 240 characters)",

                "survey.result.title": "Assessment result",
                "survey.result.overall": "Score",
                "survey.result.interpretationLabel": "Interpretation",
                "survey.level.beginner": "Beginner level",
                "survey.level.intermediate": "Intermediate level",
                "survey.level.advanced": "Advanced level",
                "survey.result.cat.e": "E",
                "survey.result.cat.s": "S",
                "survey.result.cat.g": "G",
                "survey.result.cat.sup": "Supply",

                // Footer
                "footer.description": "Transform fuel data into actionable emission insights.",
                "footer.product": "Product",
                "footer.documentation": "Documentation",
                "footer.company": "Company",
                "footer.about": "About",
                "footer.privacy": "Privacy Policy",
                "footer.connect": "Connect",
                "footer.copyright": "© 2025 ESGSyncPRO. All rights reserved.",
                
                // Language
                "language.select": "Language"
            },
            
            pl: {
                // Navigation
                "nav.home": "Strona główna",
                "nav.features": "Funkcje",
                "nav.pricing": "Cennik",
                "nav.docs": "Dokumentacja",
                "nav.contact": "Kontakt",
                
                // CTA Buttons  
                "cta.getStarted": "Rozpocznij",
                "cta.tryDemo": "Wypróbuj demo",
                "cta.viewDocs": "Zobacz dokumentację",
                "cta.startFreeTrial": "Zacznij darmowy okres próbny",
                "cta.contactSales": "Skontaktuj się z zespołem sprzedaży",
                
                // Hero Section
                "hero.title.part1": "Przekształć dane o paliwach w",
                "hero.title.part2": " wskaźniki CO₂e",
                "hero.subtitle": "Natychmiast konwertuj dane o paliwach na wskaźniki CO₂e dzięki naszej zaawansowanej platformie obliczania emisji. Dokładne, skalowalne i przyjazne dla programistów.",
                
                // Benefits Section
                "benefits.title": "Kluczowe korzyści",
                "benefits.subtitle": "Wszystko czego potrzebujesz do dokładnych obliczeń emisji",
                "benefits.performance.title": "Wysoka wydajność",
                "benefits.performance.description": "Przetwarzaj miliony rekordów paliwa w sekundach dzięki naszemu zoptymalizowanemu silnikowi obliczeniowemu.",
                "benefits.accuracy.title": "Precyzyjna dokładność",
                "benefits.accuracy.description": "Standardowe współczynniki emisji zapewniają precyzyjne obliczenia CO₂e za każdym razem.",
                "benefits.scalability.title": "Nieskończona skalowalność",
                "benefits.scalability.description": "Od startupów po przedsiębiorstwa, nasza platforma skaluje się wraz z rosnącymi potrzebami danych.",
                "benefits.api.title": "Otwarte API",
                "benefits.api.description": "RESTful API z kompleksową dokumentacją dla bezproblemowej integracji.",
                
                // How It Works Section
                "howItWorks.title": "Jak to działa",
                "howItWorks.subtitle": "Trzy proste kroki do wglądu w emisje",
                "howItWorks.step1.title": "Prześlij dane",
                "howItWorks.step1.description": "Prześlij dane o zużyciu paliwa przez CSV, Excel lub wywołaj nasze API bezpośrednio z twoich systemów.",
                "howItWorks.step2.title": "Oblicz emisje",
                "howItWorks.step2.description": "Nasz silnik automatycznie oblicza wartości CO₂e używając najnowszych współczynników emisji i metodologii.",
                "howItWorks.step3.title": "Wizualizuj i eksportuj",
                "howItWorks.step3.description": "Otrzymaj interaktywne dashboardy i eksportuj wyniki w wielu formatach do raportowania i analizy.",
                
                // Calculator Section
                "calculator.title": "Wypróbuj teraz",
                "calculator.subtitle": "Oblicz emisje natychmiast, bez rejestracji",
                "calculator.fuelType": "Typ paliwa",
                "calculator.consumption": "Zużycie (litry)",
                "calculator.consumptionPlaceholder": "1000",
                "calculator.calculate": "Oblicz emisje CO₂e",
                "calculator.defaultMessage": "Wprowadź wartości powyżej aby obliczyć emisje",
                "calculator.basedOn": "Na podstawie standardowych współczynników emisji",
                "calculator.fuelTypes.gasoline": "Benzyna (2,31 kg CO₂e/L)",
                "calculator.fuelTypes.diesel": "Diesel (2,68 kg CO₂e/L)",
                "calculator.fuelTypes.naturalGas": "Gaz ziemny (1,87 kg CO₂e/L)",
                "calculator.fuelTypes.propane": "Propan (1,54 kg CO₂e/L)",
                
                // Pricing Section
                "pricing.title": "Plany cenowe",
                "pricing.subtitle": "Wybierz plan dopasowany do twoich potrzeb",
                "pricing.perMonth": "/miesiąc",
                "pricing.mostPopular": "Najpopularniejszy",
                "pricing.custom": "Na zamówienie",
                "pricing.free.title": "Darmowy",
                "pricing.free.feature1": "1000 obliczeń/miesiąc",
                "pricing.free.feature2": "Podstawowe typy paliw",
                "pricing.free.feature3": "Dostęp do API",
                "pricing.pro.title": "Pro",
                "pricing.pro.feature1": "100 000 obliczeń/miesiąc",
                "pricing.pro.feature2": "Wszystkie typy paliw",
                "pricing.pro.feature3": "Zaawansowane analizy",
                "pricing.pro.feature4": "Priorytetowe wsparcie",
                "pricing.enterprise.title": "Enterprise",
                "pricing.enterprise.feature1": "Nieograniczone obliczenia",
                "pricing.enterprise.feature2": "Niestandardowe integracje",
                "pricing.enterprise.feature3": "Dedykowane wsparcie",
                "pricing.enterprise.feature4": "Gwarancja SLA",
                
                // Email CTA (ESG)
                "esgEmail.headline": "Twój raport ESG wysyłamy natychmiast – bez chaosu i nerwów",
                "esgEmail.subtitle": "Wypełnij 26 pytań → otrzymasz personalizowany PDF natychmiast. Zero zobowiązań.",
                "esgEmail.cta": "Rozpocznij ocenę ESG",
                "esgEmail.emailPlaceholder": "Adres e‑mail",
                "esgEmail.disclaimer": "Możesz zrezygnować w każdej chwili (STOP).",
                "esgEmail.button.sending": "Wysyłanie...",
                "esgEmail.button.sent": "Wysłano",
                "esgEmail.validation.invalidEmail": "Wprowadź poprawny adres e‑mail.",
                "esgEmail.endpointNotConfigured": "Endpoint nie jest skonfigurowany. Skontaktuj się z administratorem.",
                "esgEmail.successMessage": "Gotowe! Sprawdź pocztę — wysłaliśmy link do Twojego raportu.",
                "esgEmail.errorMessage": "Nie udało się zapisać adresu. Spróbuj ponownie.",

                // Survey modal
                "survey.title": "Szybka ocena ESG",
                "survey.consent.title": "Czy chcesz przejść szybki test ESG?",
                "survey.consent.subtitle": "Zajmie ~3–5 minut. Po zakończeniu zobaczysz wynik i benchmark.",
                "survey.buttons.yesStart": "Tak, rozpocznij",
                "survey.buttons.noLater": "Nie teraz",
                "survey.buttons.close": "Zamknij",
                "survey.buttons.back": "Wstecz",
                "survey.buttons.next": "Dalej",
                "survey.buttons.finish": "Zakończ",
                "survey.validation.fillAll": "Proszę wypełnić wszystkie pola, aby kontynuować.",
                "survey.result.thanks.title": "Dziękujemy za wypełnienie testu!",
                "survey.result.thanks.subtitle": "Twój spersonalizowany PDF dotrze na e‑mail w ciągu 1 minuty.",

                "survey.sections.profile.title": "1. Profil firmy",
                "survey.profile.industry": "Branża",
                "survey.profile.industry.options.manufacturing": "Produkcja",
                "survey.profile.industry.options.services": "Usługi",
                "survey.profile.industry.options.it": "IT / Oprogramowanie",
                "survey.profile.industry.options.retail": "Handel",
                "survey.profile.industry.options.transport": "Transport / Logistyka",
                "survey.profile.industry.options.other": "Inna",
                "survey.profile.employees": "Liczba pracowników",
                "survey.profile.employees.options.1_10": "1–10",
                "survey.profile.employees.options.11_50": "11–50",
                "survey.profile.employees.options.51_250": "51–250",
                "survey.profile.employees.options.251_500": "251–500",
                "survey.profile.employees.options.500_plus": "500+",
                "survey.profile.country": "Kraj głównych operacji",
                "survey.profile.revenue": "Roczny przychód",
                "survey.profile.revenue.options.lt1": "< 1 mln EUR",
                "survey.profile.revenue.options.1_10": "1–10 mln EUR",
                "survey.profile.revenue.options.10_50": "10–50 mln EUR",
                "survey.profile.revenue.options.50_250": "50–250 mln EUR",
                "survey.profile.revenue.options.250_plus": "250 mln EUR+",
                "survey.profile.csrd": "Podleganie obowiązkowi CSRD",
                "survey.profile.csrd.options.yes": "Tak",
                "survey.profile.csrd.options.no": "Nie",
                "survey.profile.csrd.options.unknown": "Nie wiem",
                "survey.profile.level": "Raportowanie na poziomie",
                "survey.profile.level.options.single": "Pojedynczej jednostki",
                "survey.profile.level.options.group": "Grupy kapitałowej",
                "survey.profile.level.options.both": "Oba",

                "survey.sections.e.title": "2. Środowisko (E)",
                "survey.e.energy": "Czy monitorujesz zużycie energii?",
                "survey.opt.yes_5": "Tak",
                "survey.opt.partial_3": "Częściowo",
                "survey.opt.no_0": "Nie",
                "survey.e.co2": "Czy monitorujesz emisje CO₂ / ślad węglowy?",
                "survey.e.scopes": "Zakresy emisji w raportowaniu",
                "survey.opt.scopes_123_5": "Scope 1, 2 i 3",
                "survey.opt.scopes_12_3": "Scope 1 i 2",
                "survey.opt.scopes_1_1": "Scope 1",
                "survey.opt.scopes_none_0": "Żaden",
                "survey.e.ren": "Udział OZE w zużyciu (%)",
                "survey.opt.ren_50_100_5": "50–100%",
                "survey.opt.ren_20_49_3": "20–49%",
                "survey.opt.ren_1_19_1": "1–19%",
                "survey.opt.ren_0_0": "0%",
                "survey.e.policy": "Czy masz formalną politykę środowiskową?",
                "survey.opt.inprogress_3": "W trakcie tworzenia",

                "survey.sections.s.title": "3. Społeczne (S)",
                "survey.s.dei": "Polityka DEI",
                "survey.s.hr": "Raportowanie danych HR (np. rotacja, bezpieczeństwo)",
                "survey.s.whistle": "System whistleblowing",
                "survey.s.incidents": "Monitorowanie wypadkowości (np. LTIFR/TRIR)",
                "survey.s.training": "Średnia liczba godzin szkoleń / pracownika / rok",
                "survey.opt.training_21_5": "21+",
                "survey.opt.training_11_20_3": "11–20",
                "survey.opt.training_1_10_1": "1–10",
                "survey.opt.training_0_0": "0",

                "survey.sections.g.title": "4. Ład korporacyjny (G)",
                "survey.g.risk": "Zarząd regularnie ocenia ryzyka ESG",
                "survey.opt.dontknow_3": "Nie wiem",
                "survey.g.pay": "Wynagrodzenie zarządu powiązane z KPI ESG",
                "survey.g.owner": "Formalny właściciel/komitet ESG",
                "survey.g.qc": "Kontrole jakości danych ESG (4-eyes, logi zmian)",

                "survey.sections.sup.title": "5. Łańcuch dostaw i dane",
                "survey.sup.count": "Ilu masz dostawców? (liczba)",
                "survey.sup.coverage": "% kluczowych dostawców objętych oceną ESG",
                "survey.opt.perc_75_5": "75%",
                "survey.opt.perc_25_75_3": "25–75%",
                "survey.opt.perc_lt25_1": "<25%",
                "survey.opt.perc_0_0": "0%",
                "survey.sup.collect": "Czy zbierasz dane ESG od dostawców?",
                "survey.sup.freq": "Jak często zbierasz dane ESG?",
                "survey.opt.freq_cont_5": "Ciągle / bieżąco",
                "survey.opt.freq_q_3": "Kwartalnie",
                "survey.opt.freq_y_1": "Raz w roku",
                "survey.opt.freq_rare_0": "Rzadziej",

                "survey.sections.open.title": "6. Sekcja otwarta",
                "survey.open.comment": "Dodatkowy komentarz (max 240 znaków)",

                "survey.result.title": "Wynik oceny",
                "survey.result.overall": "Wynik",
                "survey.result.interpretationLabel": "Interpretacja",
                "survey.level.beginner": "Początkowy poziom",
                "survey.level.intermediate": "Średni poziom",
                "survey.level.advanced": "Zaawansowany poziom",
                "survey.result.cat.e": "E",
                "survey.result.cat.s": "S",
                "survey.result.cat.g": "G",
                "survey.result.cat.sup": "Łańcuch dostaw",

                // Footer
                "footer.description": "Przekształć dane o paliwach w praktyczne wglądy w emisje.",
                "footer.product": "Produkt",
                "footer.documentation": "Dokumentacja",
                "footer.company": "Firma",
                "footer.about": "O nas",
                "footer.privacy": "Polityka prywatności",
                "footer.connect": "Połącz się",
                "footer.copyright": "© 2025 ESGSyncPRO. Wszelkie prawa zastrzeżone.",
                
                // Language
                "language.select": "Język"
            }
        };
        
        // Current language state
        let currentLanguage = 'en'; // Default to English
        
        // Initialize language from URL parameter or localStorage
        function initializeLanguage() {
            const urlParams = new URLSearchParams(window.location.search);
            const urlLang = urlParams.get('lang');
            
            if (urlLang && (urlLang === 'en' || urlLang === 'pl')) {
                currentLanguage = urlLang;
                console.log('Language set from URL:', currentLanguage);
            } else {
                const storedLang = localStorage.getItem('esgsyncp-language');
                if (storedLang && (storedLang === 'en' || storedLang === 'pl')) {
                    currentLanguage = storedLang;
                    console.log('Language set from localStorage:', currentLanguage);
                } else {
                    currentLanguage = 'en';
                    console.log('Language set to default (English)');
                }
                
                // Update URL if no language parameter is present
                if (!urlLang) {
                    const url = new URL(window.location);
                    url.searchParams.set('lang', currentLanguage);
                    window.history.replaceState({}, '', url);
                }
            }
        }
        
        // Language switching functions
        function changeLanguage(lang) {
            console.log('Changing language to:', lang);
            currentLanguage = lang;
            localStorage.setItem('esgsyncp-language', lang);
            
            // Update URL with language parameter
            const url = new URL(window.location);
            url.searchParams.set('lang', lang);
            window.history.pushState({}, '', url);
            
            // Close dropdown immediately
            closeAllLanguageDropdowns();
            
            // Update page content and video
            updatePageLanguage();
            updateLanguageSelectors();
            setVideoSource();
            
            // Close mobile menu if open
            if (isMobileMenuOpen) {
                toggleMobileMenu();
            }
            
            // Update calculator preview if visible
            setTimeout(updatePreviewCalculation, 100);
        }
        
        // Set video source based on current language
        function setVideoSource() {
            const video = document.getElementById('hero-video');
            const videoSource = document.getElementById('video-source');
            
            console.log('setVideoSource called, currentLanguage:', currentLanguage);
            console.log('Video element:', video);
            console.log('Video source element:', videoSource);
            
            if (!video || !videoSource) {
                console.error('Video or video source element not found');
                return;
            }
            
            // Pause current video
            video.pause();
            
            // Set the correct video source based on language
            if (currentLanguage === 'pl') {
                videoSource.src = 'public/polish.mp4?t=' + Date.now();
                console.log('Setting Polish video source: public/polish.mp4');
            } else {
                videoSource.src = 'public/english.mp4?t=' + Date.now();
                console.log('Setting English video source: public/english.mp4');
            }
            
            console.log('Video source set to:', videoSource.src);
            
            // Force video reload
            video.load();
            console.log('Video load() called');
            
            // Add visual feedback - briefly show loading state
            const videoContainer = video.closest('.custom-video-container');
            if (videoContainer) {
                videoContainer.style.opacity = '0.7';
                videoContainer.style.transition = 'opacity 0.3s ease';
                
                // Add loading indicator
                const loadingOverlay = document.createElement('div');
                loadingOverlay.id = 'video-loading-overlay';
                loadingOverlay.style.cssText = `
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: rgba(0,0,0,0.8);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: white;
                    font-size: 18px;
                    font-weight: bold;
                    z-index: 10;
                    border-radius: 16px;
                `;
                loadingOverlay.textContent = currentLanguage === 'pl' ? 'Ładowanie wideo polskiego...' : 'Loading English video...';
                videoContainer.appendChild(loadingOverlay);
            }
            
            // Wait for video to load metadata, then reinitialize player
            video.addEventListener('loadedmetadata', function() {
                console.log('Video metadata loaded, reinitializing player...');
                
                // Remove loading overlay
                const loadingOverlay = document.getElementById('video-loading-overlay');
                if (loadingOverlay) {
                    loadingOverlay.remove();
                }
                
                // Restore opacity
                if (videoContainer) {
                    videoContainer.style.opacity = '1';
                }
                
                // Reset video to beginning but keep paused
                video.currentTime = 0;
                // Don't auto-play, keep video paused
                // video.play().catch(e => console.log('Auto-play prevented:', e));
                
                // Reset play/pause button to play state
                const playIcon = document.getElementById('play-icon');
                const pauseIcon = document.getElementById('pause-icon');
                if (playIcon && pauseIcon) {
                    playIcon.style.display = 'block';
                    pauseIcon.style.display = 'none';
                    console.log('Play/pause button reset to play state');
                }
                
                // Attach video event listeners
                attachVideoEventListeners();
                
                initCustomVideoPlayer();
            }, { once: true });
            
            // Fallback if loadedmetadata doesn't fire
            setTimeout(() => {
                if (video.readyState === 0) {
                    console.log('Video not loaded, retrying...');
                    video.load();
                } else {
                    console.log('Video readyState:', video.readyState);
                    // Remove loading overlay
                    const loadingOverlay = document.getElementById('video-loading-overlay');
                    if (loadingOverlay) {
                        loadingOverlay.remove();
                    }
                    // Restore opacity even if metadata didn't load
                    if (videoContainer) {
                        videoContainer.style.opacity = '1';
                    }
                    
                    // Reset play/pause button to play state
                    const playIcon = document.getElementById('play-icon');
                    const pauseIcon = document.getElementById('pause-icon');
                    if (playIcon && pauseIcon) {
                        playIcon.style.display = 'block';
                        pauseIcon.style.display = 'none';
                        console.log('Play/pause button reset to play state (fallback)');
                    }
                    
                    // Attach video event listeners
                    attachVideoEventListeners();
                    
                    initCustomVideoPlayer();
                }
            }, 1000);
        }
        
        // Update video source based on language
        function updateVideoSource() {
            const video = document.getElementById('hero-video');
            
            if (!video) {
                console.error('Video element not found');
                return;
            }
            
            // Store current time and playing state
            const currentTime = video.currentTime;
            const wasPlaying = !video.paused;
            
            // Remove all existing source elements
            const existingSources = video.querySelectorAll('source');
            existingSources.forEach(source => source.remove());
            
            // Create new source element based on language
            const newSource = document.createElement('source');
            if (currentLanguage === 'pl') {
                newSource.src = 'public/polish.mp4?t=' + Date.now();
                console.log('Switching to Polish video: public/polish.mp4');
            } else {
                newSource.src = 'public/english.mp4?t=' + Date.now();
                console.log('Switching to English video: public/english.mp4');
            }
            newSource.type = 'video/mp4';
            
            // Insert the new source before the fallback image
            const fallbackImg = video.querySelector('img');
            if (fallbackImg) {
                video.insertBefore(newSource, fallbackImg);
            } else {
                video.appendChild(newSource);
            }
            
            // Reload video
            video.load();
            
            // Restore playback state after a short delay
            setTimeout(() => {
                if (wasPlaying) {
                    video.play().catch(e => console.log('Auto-play prevented:', e));
                }
                video.currentTime = currentTime;
            }, 200);
        }
        
        // Language dropdown functions
        function toggleLanguageDropdown() {
            const dropdown = document.getElementById('language-dropdown');
            const arrow = document.getElementById('language-arrow');
            
            if (!dropdown || !arrow) return;
            
            const isVisible = dropdown.style.opacity === '1' && dropdown.style.visibility === 'visible';
            
            if (isVisible) {
                // Close dropdown
                dropdown.style.opacity = '0';
                dropdown.style.visibility = 'hidden';
                arrow.style.transform = 'rotate(0deg)';
                console.log('Language dropdown closed');
            } else {
                // Open dropdown
                dropdown.style.opacity = '1';
                dropdown.style.visibility = 'visible';
                arrow.style.transform = 'rotate(180deg)';
                console.log('Language dropdown opened');
            }
        }
        
        function closeAllLanguageDropdowns() {
            const dropdown = document.getElementById('language-dropdown');
            const arrow = document.getElementById('language-arrow');
            
            if (dropdown && arrow) {
                // Force close dropdown
                dropdown.style.opacity = '0';
                dropdown.style.visibility = 'hidden';
                dropdown.style.display = 'none';
                arrow.style.transform = 'rotate(0deg)';
                
                // Remove any hover states
                setTimeout(() => {
                    dropdown.style.display = '';
                }, 200);
                
                console.log('Language dropdown closed');
            }
        }
        
        // Close language dropdowns when clicking outside
        document.addEventListener('click', function(event) {
            const languageSelector = document.getElementById('language-selector');
            const languageDropdown = document.getElementById('language-dropdown');
            
            // Check if click is outside header language selector
            if (languageSelector && languageDropdown && 
                !languageSelector.contains(event.target) && 
                !languageDropdown.contains(event.target)) {
                const arrow = document.getElementById('language-arrow');
                if (languageDropdown.style.opacity === '1') {
                    languageDropdown.style.opacity = '0';
                    languageDropdown.style.visibility = 'hidden';
                    if (arrow) arrow.style.transform = 'rotate(0deg)';
                }
            }
        });
        

        
        function updatePageLanguage() {
            const elements = document.querySelectorAll('[data-translate]');
            elements.forEach(element => {
                const key = element.getAttribute('data-translate');
                if (translations[currentLanguage] && translations[currentLanguage][key]) {
                    element.textContent = translations[currentLanguage][key];
                }
            });
            
            // Update select options
            const options = document.querySelectorAll('[data-translate-option]');
            options.forEach(option => {
                const key = option.getAttribute('data-translate-option');
                if (translations[currentLanguage] && translations[currentLanguage][key]) {
                    option.textContent = translations[currentLanguage][key];
                }
            });
            
            // Update placeholders
            const placeholderElements = document.querySelectorAll('[data-translate-placeholder]');
            placeholderElements.forEach(element => {
                const key = element.getAttribute('data-translate-placeholder');
                if (translations[currentLanguage] && translations[currentLanguage][key]) {
                    element.placeholder = translations[currentLanguage][key];
                }
            });
            

            
            // Update HTML lang attribute
            document.documentElement.lang = currentLanguage;
        }
        
        function updateLanguageSelectors() {
            const languageNames = {
                'en': 'English',
                'pl': 'Polish'
            };
            
            // Update header language selector
            const currentLangSpan = document.getElementById('current-language');
            const footerCurrentLangSpan = document.getElementById('footer-current-language');
            
            if (currentLangSpan) {
                currentLangSpan.textContent = languageNames[currentLanguage];
            }
            if (footerCurrentLangSpan) {
                footerCurrentLangSpan.textContent = languageNames[currentLanguage];
            }
            
            // Update active states for all language options
            updateLanguageOptionStates();
        }
        
        function updateLanguageOptionStates() {
            // Header dropdown options
            const headerEnOption = document.getElementById('lang-option-en');
            const headerPlOption = document.getElementById('lang-option-pl');
            
            // Mobile options
            const mobileEnOption = document.getElementById('mobile-lang-option-en');
            const mobilePlOption = document.getElementById('mobile-lang-option-pl');
            
            // Reset all options
            const allOptions = [headerEnOption, headerPlOption, mobileEnOption, mobilePlOption];
            allOptions.forEach(option => {
                if (option) {
                    option.classList.remove('bg-green-100', 'text-green-800', 'bg-emerald-100', 'text-emerald-800');
                    option.classList.add('hover:bg-gray-50');
                }
            });
            
            // Set active states with light green color
            if (currentLanguage === 'en') {
                if (headerEnOption) {
                    headerEnOption.classList.add('bg-emerald-100', 'text-emerald-800');
                    headerEnOption.classList.remove('hover:bg-gray-50');
                }
                if (mobileEnOption) {
                    mobileEnOption.classList.add('bg-emerald-100', 'text-emerald-800');
                    mobileEnOption.classList.remove('hover:bg-gray-50');
                }
            } else if (currentLanguage === 'pl') {
                if (headerPlOption) {
                    headerPlOption.classList.add('bg-emerald-100', 'text-emerald-800');
                    headerPlOption.classList.remove('hover:bg-gray-50');
                }
                if (mobilePlOption) {
                    mobilePlOption.classList.add('bg-emerald-100', 'text-emerald-800');
                    mobilePlOption.classList.remove('hover:bg-gray-50');
                }
            }
        }
        
        // Mobile menu state
        let isMobileMenuOpen = false;
        
        // Toggle mobile menu
        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobile-menu');
            const burgerLine1 = document.getElementById('burger-line-1');
            const burgerLine2 = document.getElementById('burger-line-2');
            const burgerLine3 = document.getElementById('burger-line-3');
            
            if (!mobileMenu || !burgerLine1 || !burgerLine2 || !burgerLine3) {
                console.error('Mobile menu elements not found');
                return;
            }
            
            isMobileMenuOpen = !isMobileMenuOpen;
            
            if (isMobileMenuOpen) {
                // Open menu
                mobileMenu.style.transform = 'translateY(0)';
                mobileMenu.style.opacity = '1';
                mobileMenu.style.visibility = 'visible';
                
                // Animate burger to X
                burgerLine1.style.transform = 'rotate(45deg) translate(5px, 5px)';
                burgerLine2.style.opacity = '0';
                burgerLine3.style.transform = 'rotate(-45deg) translate(7px, -6px)';
                
                // Prevent body scroll
                document.body.style.overflow = 'hidden';
            } else {
                // Close menu
                mobileMenu.style.transform = 'translateY(-100%)';
                mobileMenu.style.opacity = '0';
                mobileMenu.style.visibility = 'hidden';
                
                // Reset burger lines
                burgerLine1.style.transform = '';
                burgerLine2.style.opacity = '';
                burgerLine3.style.transform = '';
                
                // Restore body scroll
                document.body.style.overflow = '';
            }
        }
        
        // Navigation handler
        function handleNavigation(element) {
            const href = element.getAttribute('href');
            if (href && href.startsWith('#')) {
                const targetId = href.substring(1);
                const target = document.getElementById(targetId);
                if (target) {
                    // Calculate offset for fixed header
                    const headerHeight = document.querySelector('header')?.offsetHeight || 73;
                    const targetPosition = target.offsetTop - headerHeight - 20; // 20px extra padding
                    
                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });
                }
            }
            
            // Prevent default link behavior
            return false;
        }
        
        // Mobile navigation handler (closes menu after navigation)
        function handleMobileNavigation(element) {
            handleNavigation(element);
            if (isMobileMenuOpen) {
                toggleMobileMenu();
            }
            return false;
        }
        
        // Close mobile menu when clicking outside
        document.addEventListener('click', function(event) {
            const mobileMenu = document.getElementById('mobile-menu');
            const menuButton = document.getElementById('mobile-menu-button');
            
            if (isMobileMenuOpen && mobileMenu && menuButton && 
                !mobileMenu.contains(event.target) && !menuButton.contains(event.target)) {
                toggleMobileMenu();
            }
        });
        
        // Button click handler
        function handleButtonClick(element) {
            const text = element.textContent.trim();
            console.log(`Button clicked: ${text}`);
            
            // Close mobile menu if open
            if (isMobileMenuOpen) {
                toggleMobileMenu();
            }
            
            // Add specific functionality based on button text
        }
        
        // Real-time calculation preview with language support
        function updatePreviewCalculation() {
            const fuelType = document.getElementById('fuel-type')?.value;
            const consumption = parseFloat(document.getElementById('consumption')?.value);
            
            const resultElement = document.querySelector('.result-container .text-3xl');
            const descriptionElement = document.querySelector('.result-container .text-base.text-gray-600');
            
            if (!resultElement || !descriptionElement) {
                console.error('Result elements not found');
                return;
            }
            
            if (!consumption || consumption <= 0 || !fuelType) {
                resultElement.textContent = '0.00 tonnes CO₂e';
                // Use translation for default message
                const defaultMessage = translations[currentLanguage]?.['calculator.defaultMessage'] || 'Enter values above to calculate emissions';
                descriptionElement.textContent = defaultMessage;
                return;
            }
            
            const emissionFactor = emissionFactors[fuelType] || 2.31;
            const emissionsTonnes = (consumption * emissionFactor) / 1000;
            
            resultElement.textContent = `${emissionsTonnes.toFixed(2)} tonnes CO₂e`;
            
            const fuelTypeDisplayEn = {
                'gasoline': 'Gasoline',
                'diesel': 'Diesel', 
                'natural-gas': 'Natural Gas',
                'propane': 'Propane'
            };
            
            const fuelTypeDisplayPl = {
                'gasoline': 'Benzyna',
                'diesel': 'Diesel', 
                'natural-gas': 'Gaz ziemny',
                'propane': 'Propan'
            };
            
            const fuelTypeDisplay = currentLanguage === 'pl' ? fuelTypeDisplayPl : fuelTypeDisplayEn;
            const previewText = currentLanguage === 'pl' ? 'Podgląd' : 'Preview';
            const literText = currentLanguage === 'pl' ? 'L' : 'L';
            
            descriptionElement.textContent = `${previewText}: ${consumption}${literText} ${fuelTypeDisplay[fuelType] || fuelTypeDisplayEn[fuelType]}`;
        }
        
        // Dropdown change handler
        function handleDropdownChange(element) {
            console.log(`Dropdown changed to: ${element.value}`);
            updatePreviewCalculation();
        }
        
        // Input change handler
        function handleInputChange(element) {
            console.log(`Input changed: ${element.value}`);
            updatePreviewCalculation();
        }
        
        // Emission factors (kg CO₂e per liter)
        const emissionFactors = {
            'gasoline': 2.31,      // kg CO₂e per liter
            'diesel': 2.68,        // kg CO₂e per liter  
            'natural-gas': 1.87,   // kg CO₂e per liter (LNG equivalent)
            'propane': 1.54        // kg CO₂e per liter
        };
        
        // Form submit handler
        function handleFormSubmit(event) {
            try {
                event.preventDefault();
                console.log('Form submitted');
                
                const formData = new FormData(event.target);
                const fuelType = formData.get('fuel-type');
                const consumption = parseFloat(formData.get('consumption'));
                
                console.log('Form data:', { fuelType, consumption });
                
                // Validate input
                if (!consumption || consumption <= 0) {
                    const validationMessage = currentLanguage === 'pl' ? 
                        'Proszę wprowadzić prawidłową ilość zużycia' : 
                        'Please enter a valid consumption amount';
                    alert(validationMessage);
                    return;
                }
                
                // Get emission factor for selected fuel type
                const emissionFactor = emissionFactors[fuelType] || 2.31;
                
                // Calculate emissions (convert kg to tonnes)
                const emissionsKg = consumption * emissionFactor;
                const emissionsTonnes = emissionsKg / 1000;
                
                console.log(`Calculating emissions for ${consumption} liters of ${fuelType}`);
                console.log(`Emission factor: ${emissionFactor} kg CO₂e/L`);
                console.log(`Total emissions: ${emissionsTonnes.toFixed(3)} tonnes CO₂e`);
                
                // Update result display
                const resultElement = document.querySelector('.result-container .text-3xl');
                const resultContainer = resultElement?.parentElement;
                
                console.log('Result elements found:', { resultElement: !!resultElement, resultContainer: !!resultContainer });
                
                if (resultElement && resultContainer) {
                 // Add loading animation
                 resultElement.style.opacity = '0.5';
                 const calculatingText = currentLanguage === 'pl' ? 'Obliczanie...' : 'Calculating...';
                 resultElement.textContent = calculatingText;
                 resultElement.classList.add('calculating');
                 
                 // Simulate calculation delay for better UX
                setTimeout(() => {
                    resultElement.style.opacity = '1';
                    resultElement.textContent = `${emissionsTonnes.toFixed(3)} tonnes CO₂e`;
                    resultElement.classList.remove('calculating');
                    
                    // Update description with fuel type
                    const descriptionElement = resultContainer.querySelector('.text-base.text-gray-600');
                    if (descriptionElement) {
                        const fuelTypeDisplayEn = {
                            'gasoline': 'Gasoline',
                            'diesel': 'Diesel',
                            'natural-gas': 'Natural Gas',
                            'propane': 'Propane'
                        };
                        
                        const fuelTypeDisplayPl = {
                            'gasoline': 'Benzyna',
                            'diesel': 'Diesel',
                            'natural-gas': 'Gaz ziemny',
                            'propane': 'Propan'
                        };
                        
                        const fuelTypeDisplay = currentLanguage === 'pl' ? fuelTypeDisplayPl : fuelTypeDisplayEn;
                        const finalCalcText = currentLanguage === 'pl' ? '✅ Obliczenie końcowe' : '✅ Final calculation';
                        const literText = currentLanguage === 'pl' ? 'L' : 'L';
                        
                        descriptionElement.textContent = `${finalCalcText}: ${consumption}${literText} ${fuelTypeDisplay[fuelType] || fuelTypeDisplayEn[fuelType]}`;
                    }
                    
                    // Add visual feedback
                    resultContainer.style.transform = 'scale(1.02)';
                    resultContainer.style.borderColor = '#91cb24';
                    setTimeout(() => {
                        resultContainer.style.transform = 'scale(1)';
                        resultContainer.style.borderColor = '';
                    }, 500);
                }, 800);
            } else {
                console.error('Result elements not found in DOM');
                const elementErrorMessage = currentLanguage === 'pl' ? 
                    'Błąd: Nie można znaleźć elementów wyników' :
                    'Error: Could not find result display elements';
                alert(elementErrorMessage);
            }
            
            } catch (error) {
                console.error('Error in form submission:', error);
                const errorMessage = currentLanguage === 'pl' ? 
                    'Wystąpił błąd podczas obliczania emisji. Spróbuj ponownie.' :
                    'An error occurred while calculating emissions. Please try again.';
                alert(errorMessage);
            }
        }
        
        // Handle window resize
        window.addEventListener('resize', function() {
            if (window.innerWidth >= 1024 && isMobileMenuOpen) {
                toggleMobileMenu();
            }
        });
        
        // Initialize mobile menu and calculator on page load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, initializing...');
            
            // Initialize language system first
            initializeLanguage();
            updatePageLanguage();
            updateLanguageSelectors();
            setVideoSource();
            ensureLanguageDropdownClosed();
            
            const mobileMenu = document.getElementById('mobile-menu');
            if (mobileMenu) {
                // Ensure menu is closed on load
                mobileMenu.style.transform = 'translateY(-100%)';
                mobileMenu.style.opacity = '0';
                mobileMenu.style.visibility = 'hidden';
                isMobileMenuOpen = false;
            }
            
            // Check if calculator elements exist
            const resultElement = document.querySelector('.result-container .text-3xl');
            const consumptionInput = document.getElementById('consumption');
            const fuelTypeSelect = document.getElementById('fuel-type');
            
            console.log('Calculator elements found:', {
                resultElement: !!resultElement,
                consumptionInput: !!consumptionInput,
                fuelTypeSelect: !!fuelTypeSelect
            });
            
            // Initialize calculator with default values
            if (consumptionInput && !consumptionInput.value) {
                consumptionInput.value = '1000';
                // Update placeholder with translated text
                const placeholderKey = consumptionInput.getAttribute('data-translate-placeholder');
                if (placeholderKey && translations[currentLanguage] && translations[currentLanguage][placeholderKey]) {
                    consumptionInput.placeholder = translations[currentLanguage][placeholderKey];
                }
            }
            
            // Run initial calculation
            setTimeout(updatePreviewCalculation, 100);
            
            // Initialize custom video player
            initCustomVideoPlayer();
            
            // Initialize Feather Icons
            if (typeof feather !== 'undefined') {
                feather.replace();
            }
            
            // Initialize header scroll movement
            initHeaderScrollMovement();
        });
        
        // Header scroll movement
        function initHeaderScrollMovement() {
            const header = document.getElementById('main-header');
            let lastScrollY = window.scrollY;
            let ticking = false;
            
            function updateHeader() {
                const currentScrollY = window.scrollY;
                
                // Move header with scroll
                if (currentScrollY > 0) {
                    // Move header up slightly as user scrolls down
                    const translateY = Math.min(currentScrollY * 0.1, 20);
                    header.style.transform = `translateY(-${translateY}px)`;
                } else {
                    header.style.transform = 'translateY(0)';
                }
                
                lastScrollY = currentScrollY;
                ticking = false;
            }
            
            function requestTick() {
                if (!ticking) {
                    requestAnimationFrame(updateHeader);
                    ticking = true;
                }
            }
            
            window.addEventListener('scroll', requestTick);
        }
        
        // Custom Video Player Functions
        let video, playPauseBtn, playIcon, pauseIcon, progressBar, timeDisplay, volumeBtn, volumeIcon, muteIcon, volumeProgress;
        
        function initCustomVideoPlayer() {
            video = document.getElementById('hero-video');
            playPauseBtn = document.getElementById('play-pause-btn');
            playIcon = document.getElementById('play-icon');
            pauseIcon = document.getElementById('pause-icon');
            progressBar = document.getElementById('progress-bar');
            timeDisplay = document.getElementById('time-display');
            volumeBtn = document.getElementById('volume-btn');
            volumeIcon = document.getElementById('volume-icon');
            muteIcon = document.getElementById('mute-icon');
            volumeProgress = document.getElementById('volume-progress');
            
            if (!video) return;
            
            // Initialize play/pause button state
            if (playIcon && pauseIcon) {
                playIcon.style.display = 'block';
                pauseIcon.style.display = 'none';
                console.log('Play/pause button initialized to play state');
            }
            
            // Update progress bar and time display
            video.addEventListener('timeupdate', updateProgress);
            video.addEventListener('loadedmetadata', updateTimeDisplay);
            video.addEventListener('ended', function() {
                playIcon.style.display = 'block';
                pauseIcon.style.display = 'none';
            });
            
            // Set initial volume
            video.volume = 1;
            updateVolumeDisplay();
            
            // Attach video event listeners
            attachVideoEventListeners();
            
            // Initialize drag functionality
            initVolumeSlider();
            initProgressSlider();
        }
        
        function togglePlayPause() {
            if (!video) return;
            
            if (video.paused) {
                video.play();
                playIcon.style.display = 'none';
                pauseIcon.style.display = 'block';
            } else {
                video.pause();
                playIcon.style.display = 'block';
                pauseIcon.style.display = 'none';
            }
        }
        
        function updateProgress() {
            if (!video || !progressBar) return;
            
            const progress = (video.currentTime / video.duration) * 100;
            progressBar.style.width = progress + '%';
            updateTimeDisplay();
        }
        
        function updateTimeDisplay() {
            if (!video || !timeDisplay) return;
            
            const current = formatTime(video.currentTime);
            const duration = formatTime(video.duration);
            timeDisplay.textContent = `${current} / ${duration}`;
        }
        
        function formatTime(seconds) {
            if (isNaN(seconds)) return '0:00';
            
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = Math.floor(seconds % 60);
            return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;
        }
        
        function setProgress(event) {
            if (!video) return;
            
            const progressContainer = event.currentTarget;
            const clickX = event.offsetX;
            const width = progressContainer.offsetWidth;
            const newTime = (clickX / width) * video.duration;
            
            video.currentTime = newTime;
        }
        
        // Progress bar drag functionality
        function initProgressSlider() {
            const progressContainer = document.querySelector('.progress-container');
            if (!progressContainer) return;
            
            let isDragging = false;
            
            function updateProgressFromEvent(event) {
                if (!video || !progressContainer) return;
                
                const rect = progressContainer.getBoundingClientRect();
                const clickX = event.clientX - rect.left;
                const width = progressContainer.offsetWidth;
                const newTime = (clickX / width) * video.duration;
                
                video.currentTime = Math.max(0, Math.min(video.duration, newTime));
            }
            
            // Mouse events for dragging
            progressContainer.addEventListener('mousedown', function(event) {
                isDragging = true;
                updateProgressFromEvent(event);
                event.preventDefault();
            });
            
            document.addEventListener('mousemove', function(event) {
                if (isDragging) {
                    updateProgressFromEvent(event);
                }
            });
            
            document.addEventListener('mouseup', function() {
                isDragging = false;
            });
            
            // Click event for direct progress setting
            progressContainer.addEventListener('click', function(event) {
                updateProgressFromEvent(event);
            });
        }
        
        function toggleMute() {
            if (!video) return;
            
            video.muted = !video.muted;
            updateVolumeDisplay();
        }
        
        function updateVolumeDisplay() {
            if (!volumeIcon || !muteIcon || !volumeProgress) return;
            
            if (video.muted || video.volume === 0) {
                volumeIcon.style.display = 'none';
                muteIcon.style.display = 'block';
            } else {
                volumeIcon.style.display = 'block';
                muteIcon.style.display = 'none';
            }
            
            volumeProgress.style.width = (video.volume * 100) + '%';
        }
        
        function setVolume(event) {
            if (!video) return;
            
            const volumeSlider = event.currentTarget;
            const clickX = event.offsetX;
            const width = volumeSlider.offsetWidth;
            const newVolume = clickX / width;
            
            video.volume = Math.max(0, Math.min(1, newVolume));
            video.muted = false;
            updateVolumeDisplay();
        }
        
        // Volume slider drag functionality
        function initVolumeSlider() {
            const volumeSlider = document.querySelector('.volume-slider');
            if (!volumeSlider) return;
            
            let isDragging = false;
            
            function updateVolumeFromEvent(event) {
                if (!video || !volumeSlider) return;
                
                const rect = volumeSlider.getBoundingClientRect();
                const clickX = event.clientX - rect.left;
                const width = volumeSlider.offsetWidth;
                const newVolume = Math.max(0, Math.min(1, clickX / width));
                
                video.volume = newVolume;
                video.muted = false;
                updateVolumeDisplay();
            }
            
            // Mouse events for dragging
            volumeSlider.addEventListener('mousedown', function(event) {
                isDragging = true;
                updateVolumeFromEvent(event);
                event.preventDefault();
            });
            
            document.addEventListener('mousemove', function(event) {
                if (isDragging) {
                    updateVolumeFromEvent(event);
                }
            });
            
            document.addEventListener('mouseup', function() {
                isDragging = false;
            });
            
            // Click event for direct volume setting
            volumeSlider.addEventListener('click', function(event) {
                updateVolumeFromEvent(event);
            });
        }
        
        function toggleFullscreen() {
            if (!video) return;
            
            if (document.fullscreenElement) {
                document.exitFullscreen();
            } else {
                const container = video.closest('.custom-video-container');
                if (container.requestFullscreen) {
                    container.requestFullscreen();
                } else if (container.webkitRequestFullscreen) {
                    container.webkitRequestFullscreen();
                } else if (container.msRequestFullscreen) {
                    container.msRequestFullscreen();
                }
            }
        }
        
        // Handle browser back/forward navigation
        window.addEventListener('popstate', function() {
            console.log('URL changed, reinitializing language...');
            initializeLanguage();
            updatePageLanguage();
            updateLanguageSelectors();
            setVideoSource();
        });
        
        // Ensure language dropdown is closed on page load
        function ensureLanguageDropdownClosed() {
            const dropdown = document.getElementById('language-dropdown');
            const arrow = document.getElementById('language-arrow');
            
            if (dropdown && arrow) {
                dropdown.style.opacity = '0';
                dropdown.style.visibility = 'hidden';
                arrow.style.transform = 'rotate(0deg)';
                console.log('Language dropdown closed on page load');
            }
        }
        
        // Initialize mobile menu and calculator on page load
        
        // Attach video event listeners
        function attachVideoEventListeners() {
            const video = document.getElementById('hero-video');
            if (!video) return;
            
            // Remove existing click listeners by removing and re-adding the event
            video.removeEventListener('click', videoClickHandler);
            
            // Add click event to video for play/pause
            video.addEventListener('click', videoClickHandler);
            
            console.log('Video click event listener attached');
        }
        
        // Set video source based on current language
        
        // Video click handler function
        function videoClickHandler() {
            togglePlayPause();
        }
    </script>
    <script>
        (function() {
            const HEADLINE_BY_LANG = {
                en: 'Your ESG report ready in 1 minute – without chaos or stress',
                pl: 'Twój raport ESG gotowy w 1 minutę – bez chaosu i nerwów'
            };
            const ENABLE_TYPING_ANIMATION = false; // will keep disabled; external Typed.js will control animation
            const SPLIT_DELIMITER = ' – ';
            const GOOGLE_APPS_SCRIPT_WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbxm84W8zSKNgdsXWrkh4OD-qZlUTK4s2v0_R1gN6HFWKIVuy6hgBY4-cezf978anmkS/exec';

            let typingTimers = [];
            function clearTypingTimers() {
                typingTimers.forEach(id => clearTimeout(id));
                typingTimers = [];
            }
            function startTypingEffect() {
                let line1 = document.getElementById('typing-text-line1');
                let line2 = document.getElementById('typing-text-line2');
                const single = document.getElementById('typing-text');
                const caret = document.querySelector('.typing-caret');
                // Support both old two-line and new single-line markup
                const useSingle = !!single;
                if (useSingle) { return; }
                if (!line1) return;
                clearTypingTimers();
                const runCycle = () => {
                    line1.textContent = '';
                    if (line2) line2.textContent = '';
                    const full = (typeof currentLanguage !== 'undefined' && HEADLINE_BY_LANG[currentLanguage]) ? HEADLINE_BY_LANG[currentLanguage] : HEADLINE_BY_LANG.en;
                    const parts = full.split(/\s[–—-]\s/);
                    let first = parts[0] || full;
                    let second = parts.slice(1).join(' – ') || '';
                    if (!second && first.length > 36) {
                        // Fallback split near middle on long headline if no dash delimiter found
                        const mid = Math.floor(first.length / 2);
                        const leftSpace = first.lastIndexOf(' ', mid + 8);
                        const rightSpace = first.indexOf(' ', mid);
                        const splitAt = leftSpace > 24 ? leftSpace : (rightSpace > -1 ? rightSpace : mid);
                        second = first.slice(splitAt + 1);
                        first = first.slice(0, splitAt);
                    }
                    const disableTyping = !ENABLE_TYPING_ANIMATION || window.matchMedia('(max-width: 640px)').matches;
                    if (disableTyping) {
                        line1.textContent = useSingle ? full : first;
                        if (line2) line2.textContent = second;
                        if (caret) caret.style.display = 'none';
                        return;
                    } else if (caret) {
                        caret.style.display = '';
                    }
                    let i1 = 0;
                    let i2 = 0;
                    // Fallback: if nothing typed within 1.2s, show full text
                    typingTimers.push(setTimeout(() => {
                        if (line1.textContent.length === 0 && (!line2 || line2.textContent.length === 0)) {
                            line1.textContent = useSingle ? full : first;
                            if (line2) line2.textContent = second;
                        }
                    }, 1200));
                    const typeOne = () => {
                        if (useSingle) {
                            if (i1 < full.length) {
                                line1.textContent += full.charAt(i1++);
                                typingTimers.push(setTimeout(typeOne, 24));
                                return;
                            }
                            typingTimers.push(setTimeout(eraseOne, 5000));
                            return;
                        }
                        if (i1 < first.length) {
                            line1.textContent += first.charAt(i1++);
                            typingTimers.push(setTimeout(typeOne, 24));
                            return;
                        }
                        if (line2 && i2 < second.length) {
                            line2.textContent += second.charAt(i2++);
                            typingTimers.push(setTimeout(typeOne, 24));
                            return;
                        }
                        // Wait 5 seconds then erase
                        typingTimers.push(setTimeout(eraseOne, 5000));
                    };
                    const eraseOne = () => {
                        if (useSingle) {
                            if (line1.textContent.length > 0) {
                                line1.textContent = line1.textContent.slice(0, -1);
                                if (i1 > 0) i1--;
                                typingTimers.push(setTimeout(eraseOne, 12));
                            } else {
                                typingTimers.push(setTimeout(runCycle, 300));
                            }
                            return;
                        }
                        if (line2 && line2.textContent.length > 0) {
                            line2.textContent = line2.textContent.slice(0, -1);
                            if (i2 > 0) i2--;
                            typingTimers.push(setTimeout(eraseOne, 12));
                        } else if (line1.textContent.length > 0) {
                            line1.textContent = line1.textContent.slice(0, -1);
                            if (i1 > 0) i1--;
                            typingTimers.push(setTimeout(eraseOne, 12));
                        } else {
                            // Loop
                            typingTimers.push(setTimeout(runCycle, 300));
                        }
                    };
                    typeOne();
                };
                runCycle();
            }

            function generateRandomLink() {
                const randomId = (crypto && crypto.randomUUID) ? crypto.randomUUID() : Math.random().toString(36).slice(2);
                return 'https://example.com/raport/' + randomId;
            }

            // Deprecated network submission via fetch (CORS). Using native form POST instead.
            async function submitLead(email) { return { ok: true }; }

            function t(key, fallback = '') {
                return (translations[currentLanguage] && translations[currentLanguage][key]) || fallback || key;
            }

            function setFeedback(message, type) {
                // disabled visual label per request
            }

            function validateEmail(email) {
                return /^(?:[A-Z0-9._%+-]+)@(?:[A-Z0-9-]+\.)+[A-Z]{2,}$/i.test(email);
            }

            function initLeadForm() {
                const form = document.getElementById('lead-form');
                const input = document.getElementById('lead-email');
                const submitBtn = document.getElementById('lead-submit');
                if (!form || !input || !submitBtn) return;

                form.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    const email = input.value.trim();
                    if (!validateEmail(email)) {
                        input.focus();
                        return;
                    }
                    // persist email for later PDF sending
                    try { window.LAST_LEAD_EMAIL = email; } catch(_) {}
                    if (!GOOGLE_APPS_SCRIPT_WEB_APP_URL || GOOGLE_APPS_SCRIPT_WEB_APP_URL.includes('REPLACE_ME')) {
                        return;
                    }
                    // Build native form submission to avoid CORS (posts into hidden iframe)
                    form.action = GOOGLE_APPS_SCRIPT_WEB_APP_URL;
                    form.method = 'POST';
                    form.target = 'lead-target';

                    // Ensure hidden fields exist
                    const ensureHidden = (name, value) => {
                        let el = form.querySelector('input[type="hidden"][name="' + name + '"]');
                        if (!el) {
                            el = document.createElement('input');
                            el.type = 'hidden';
                            el.name = name;
                            form.appendChild(el);
                        }
                        el.value = value;
                    };
                    ensureHidden('source', 'landing-esgsyncpro');
                    ensureHidden('submittedAt', new Date().toISOString());
                    ensureHidden('randomLink', generateRandomLink());
                    ensureHidden('userAgent', navigator.userAgent || '');

                    submitBtn.disabled = true;
                    submitBtn.textContent = t('esgEmail.button.sending', 'Sending...');
                    // Submit natively; cannot read response due to cross-origin, so optimistically show success
                    form.submit();
                    setTimeout(() => {
                        form.reset();
                        submitBtn.textContent = t('esgEmail.button.sent', 'Sent');
                        openSurveyModal();
                    }, 600);
                });
            }

            let bootstrapped = false;
            function bootstrapOnce() {
                if (bootstrapped) return;
                bootstrapped = true;
                startTypingEffect();
                initLeadForm();
            }
            document.addEventListener('DOMContentLoaded', bootstrapOnce);
            if (document.readyState !== 'loading') {
                // In case the script is executed after DOMContentLoaded
                bootstrapOnce();
            }

            // Re-run typing effect and update subtitle/cta/disclaimer on language change
            const originalChangeLanguage = typeof changeLanguage === 'function' ? changeLanguage : null;
            if (originalChangeLanguage) {
                window.changeLanguage = function(lang) {
                    originalChangeLanguage(lang);
                    // After translations update, restart typing loop with new language
                    setTimeout(startTypingEffect, 50);
                }
            }

            // External Typed.js headline init (uses #typed-headline)
            function startTypedJsHeadline() {
                try {
                    const el = document.getElementById('typed-headline');
                    if (!el || !window.Typed) return;
                    const strings = [HEADLINE_BY_LANG[currentLanguage] || HEADLINE_BY_LANG.en];
                    if (el._typed && el._typed.destroy) { el._typed.destroy(); }
                    const typed = new window.Typed('#typed-headline', {
                        strings,
                        typeSpeed: 32,
                        backSpeed: 18,
                        startDelay: 200,
                        backDelay: 3000,
                        smartBackspace: true,
                        loop: true,
                        showCursor: false
                    });
                    el._typed = typed;
                } catch(_) {}
            }
            document.addEventListener('DOMContentLoaded', startTypedJsHeadline);
            if (originalChangeLanguage) {
                const prev = window.changeLanguage;
                window.changeLanguage = function(lang) { prev(lang); setTimeout(startTypedJsHeadline, 50); };
            }

            // ===== Survey Modal Logic =====
            function qs(id) { return document.getElementById(id); }
            function openSurveyModal() {
                const el = qs('survey-modal');
                if (el) { el.classList.add('show'); el.setAttribute('aria-hidden', 'false'); }
                // init first step
                showStep('consent');
            }
            function closeSurveyModal() {
                const el = qs('survey-modal');
                if (el) { el.classList.remove('show'); el.setAttribute('aria-hidden', 'true'); }
            }
            window.openSurveyModal = openSurveyModal;

            const steps = ['consent', 'form', 'results'];
            let currentStep = 'consent';
            function showStep(step) {
                currentStep = step;
                const consent = qs('survey-step-consent');
                const form = qs('survey-form');
                const results = qs('survey-results');
                const prev = qs('survey-prev');
                const next = qs('survey-next');
                const submit = qs('survey-submit');
                if (consent) consent.style.display = step === 'consent' ? '' : 'none';
                if (form) form.style.display = step === 'form' ? '' : 'none';
                if (results) results.style.display = step === 'results' ? '' : 'none';
                if (prev) prev.style.display = step === 'form' ? '' : 'none';
                if (next) next.style.display = step === 'form' ? '' : 'none';
                if (submit) submit.style.display = step === 'form' ? '' : 'none';
            }

            function computeScores() {
                const getVal = (name) => {
                    const el = document.querySelector(`[name="${name}"]:checked`);
                    return el ? Number(el.value) : 0;
                };
                // Require all radios selected; if any missing, block submission
                const requiredNames = [
                    'e_energy','e_co2','e_scopes','e_res','e_policy',
                    's_dei','s_hr','s_whistle','s_incidents','s_training',
                    'g_risk','g_pay','g_owner','g_qc',
                    'sup_coverage','sup_collect','sup_freq'
                ];
                const missing = requiredNames.filter(n => !document.querySelector(`[name="${n}"]:checked`));
                if (missing.length) {
                    alert(t('survey.validation.fillAll','Please fill in all fields to continue.'));
                    throw new Error('Validation: missing required answers: ' + missing.join(','));
                }
                // E 25
                const e = getVal('e_energy') + getVal('e_co2') + getVal('e_scopes') + getVal('e_res') + getVal('e_policy');
                // S 25
                const s = getVal('s_dei') + getVal('s_hr') + getVal('s_whistle') + getVal('s_incidents') + getVal('s_training');
                // G 20
                const g = getVal('g_risk') + getVal('g_pay') + getVal('g_owner') + getVal('g_qc');
                // Supply 15
                const sup = getVal('sup_coverage') + getVal('sup_collect') + getVal('sup_freq');
                const total = e + s + g + sup;
                const percent = Math.round((total / 85) * 100);
                let interpret = 'Początkowy poziom';
                if (percent >= 61) interpret = 'Zaawansowany poziom';
                else if (percent >= 31) interpret = 'Średni poziom';
                return { e, s, g, sup, total, percent, interpret };
            }

            function renderResults() {
                const r = computeScores();
                const t = (k, fb='') => (translations[currentLanguage] && translations[currentLanguage][k]) || fb || k;
                // Replace results contents with a simple thank-you message
                const resultsEl = qs('survey-results');
                if (resultsEl) {
                    resultsEl.innerHTML = `
                        <div class="q-title">${t('survey.result.thanks.title', 'Dziękujemy za wypełnienie testu!')}</div>
                        <div class="q-sub" style="margin-top:8px;">${t('survey.result.thanks.subtitle', 'Twój spersonalizowany PDF dotrze na e‑mail w ciągu 1 minuty.')}</div>
                    `;
                }
                showStep('results');
                // After showing results, generate PDF and download it
                try { generateAndDownloadPdf(r); } catch (e) { console.warn('PDF generation failed', e); }
            }
            // ===== PDF generation and download =====
            async function generateAndDownloadPdf(scores) {
                try {
                    console.log('Starting PDF generation...', scores);
                    if (!window.html2canvas) throw new Error('html2canvas not loaded');
                    if (!window.jspdf) throw new Error('jsPDF not loaded');
                    console.log('Libraries loaded successfully');

                    const t = (k, fb='') => (translations[currentLanguage] && translations[currentLanguage][k]) || fb || k;
                    const emailInput = document.getElementById('lead-email');
                    const email = (emailInput ? emailInput.value.trim() : '') || (window.LAST_LEAD_EMAIL || '');

                    // Collect client details from the survey form
                    const clientDetails = {
                        industry: document.querySelector('select[name="industry"]')?.selectedOptions[0]?.text || '',
                        employees: document.querySelector('select[name="employees"]')?.selectedOptions[0]?.text || '',
                        country: document.querySelector('input[name="country"]')?.value || '',
                        revenue: document.querySelector('select[name="revenue"]')?.selectedOptions[0]?.text || '',
                        csrd: document.querySelector('select[name="csrd"]')?.selectedOptions[0]?.text || '',
                        scopeLevel: document.querySelector('select[name="scopeLevel"]')?.selectedOptions[0]?.text || '',
                        email: email,
                        comment: document.querySelector('textarea[name="open_comment"]')?.value || ''
                    };

                    console.log('Client details collected:', clientDetails);

                    // Create HTML content for PDF
                    const levels = {
                        beginner: t('survey.level.beginner', currentLanguage === 'pl' ? 'Początkowy poziom' : 'Beginner level'),
                        intermediate: t('survey.level.intermediate', currentLanguage === 'pl' ? 'Średni poziom' : 'Intermediate level'),
                        advanced: t('survey.level.advanced', currentLanguage === 'pl' ? 'Zaawansowany poziom' : 'Advanced level')
                    };
                    const interp = scores.percent >= 61 ? levels.advanced : (scores.percent >= 31 ? levels.intermediate : levels.beginner);
                    
                    const supplyLabel = t('survey.result.cat.sup','Supply');
                    const overallLabel = t('survey.result.overall','Score');
                    const interpretLabel = t('survey.result.interpretationLabel','Interpretation');
                    
                    // Get recommendations
                    const rec = pickRecommendations(scores.percent);
                    const recTitle = templateString(rec.title, { score_overall: String(scores.percent) });
                    const recHow = templateString(rec.how, { score_overall: String(scores.percent) });
                    const recWhy = templateString(rec.why, { score_overall: String(scores.percent) });
                    const recHeader = currentLanguage === 'pl' ? 'Rekomendacje' : 'Recommendations';

                    console.log('Creating HTML content...');
                    // Generate HTML content using the template function with client details
                    const htmlContent = generatePdfHtmlContent(scores, currentLanguage, t, rec, clientDetails);

                    console.log('HTML Content created:', htmlContent);
                    console.log('HTML Content length:', htmlContent.length);
                    
                    // Create temporary DOM element for PDF generation
                    const tempDiv = document.createElement('div');
                    tempDiv.innerHTML = htmlContent;
                    tempDiv.style.position = 'absolute';
                    tempDiv.style.left = '-9999px';
                    tempDiv.style.top = '-9999px';
                    tempDiv.style.width = '800px';
                    tempDiv.style.backgroundColor = '#ffffff';
                    document.body.appendChild(tempDiv);
                    
                    console.log('Temp div created:', tempDiv);
                    console.log('Temp div innerHTML length:', tempDiv.innerHTML.length);
                    console.log('Temp div children count:', tempDiv.children.length);
                    console.log('Temp div first child:', tempDiv.firstElementChild);
                    
                    // Wait a bit for DOM to settle
                    await new Promise(resolve => setTimeout(resolve, 200));
                    
                    console.log('Converting HTML to canvas...');
                    
                    // Convert HTML to canvas using html2canvas
                    const canvas = await html2canvas(tempDiv, {
                        scale: 2,
                        useCORS: false,
                        allowTaint: false,
                        backgroundColor: '#ffffff',
                        width: 800,
                        height: tempDiv.scrollHeight,
                        scrollX: 0,
                        scrollY: 0,
                        logging: false,
                        removeContainer: true
                    });
                    
                    console.log('Canvas created:', canvas);
                    console.log('Canvas dimensions:', canvas.width, 'x', canvas.height);
                    
                    // Clean up temporary element
                    document.body.removeChild(tempDiv);
                    
                    // Convert canvas to PDF using jsPDF
                    console.log('Converting canvas to PDF...');
                    const { jsPDF } = window.jspdf;
                    const pdf = new jsPDF('p', 'mm', 'a4');
                    
                    // Calculate dimensions
                    const imgWidth = 210; // A4 width in mm
                    const pageHeight = 297; // A4 height in mm
                    const imgHeight = (canvas.height * imgWidth) / canvas.width;
                    let heightLeft = imgHeight;
                    let position = 0;
                    
                    // Add first page
                    pdf.addImage(canvas, 'JPEG', 0, position, imgWidth, imgHeight);
                    heightLeft -= pageHeight;
                    
                    // Add additional pages if needed
                    while (heightLeft >= 0) {
                        position = heightLeft - imgHeight;
                        pdf.addPage();
                        pdf.addImage(canvas, 'JPEG', 0, position, imgWidth, imgHeight);
                        heightLeft -= pageHeight;
                    }
                    
                    console.log('PDF created successfully');
                    
                    // Convert PDF to base64 and send to server
                    console.log('Converting PDF to base64...');
                    const pdfBase64 = pdf.output('datauristring').split(',')[1];
                    console.log('PDF converted to base64, length:', pdfBase64.length);
                    
                    // Send PDF to server
                    console.log('Sending PDF to server...');
                    await sendPdfToServer(pdfBase64, clientDetails.email, currentLanguage);
                    console.log('PDF sent to server successfully');
                } catch (e) {
                    console.error('generateAndDownloadPdf error', e);
                    console.error('Error stack:', e.stack);
                    // Show error to user
                    alert('PDF generation failed: ' + e.message);
                }
            }

            function templateString(str, map) {
                if (!str) return '';
                return str.replace(/\{\{\s*(\w+)\s*\}\}/g, (_, k) => (k in map ? String(map[k]) : ''));
            }

            function condenseText(text, maxLen) {
                const s = String(text || '').replace(/\s+/g, ' ').trim();
                if (!maxLen || s.length <= maxLen) return s;
                return s.slice(0, Math.max(0, maxLen - 1)).trim() + '…';
            }
            
            // Send PDF to server
            async function sendPdfToServer(pdfBase64, email, lang) {
    try {
        console.log('=== НАЧАЛО ОТПРАВКИ PDF ===');
        console.log('Email:', email);
        console.log('Язык:', lang);
        console.log('Размер PDF (base64):', pdfBase64.length, 'символов');
        
        // Используем iframe для обхода CORS
        return new Promise((resolve, reject) => {
            // Создаем уникальный ID для iframe
            const iframeId = 'pdfUpload_' + Date.now();
            
            // Создаем скрытый iframe
            const iframe = document.createElement('iframe');
            iframe.id = iframeId;
            iframe.style.display = 'none';
            iframe.name = iframeId;
            
            // Создаем форму для отправки данных
            const form = document.createElement('form');
            form.method = 'POST';
            form.action = 'https://script.google.com/macros/s/AKfycbyRcTean4pIh5f7BZc60FKAgEvCwuymHrCQzuVag0f2cbMMb1Pmtk038hylQIYIjZoQ/exec';
            form.target = iframeId;
            form.enctype = 'application/x-www-form-urlencoded';
            
            // Добавляем поля формы
            const fields = {
                action: 'email_pdf',
                email: email,
                pdfBase64: pdfBase64,
                lang: lang,
                filename: `ESG_Assessment_${Date.now()}.pdf`
            };
            
            Object.keys(fields).forEach(key => {
                const input = document.createElement('input');
                input.type = 'hidden';
                input.name = key;
                input.value = fields[key];
                form.appendChild(input);
            });
            
            // Добавляем iframe и форму в DOM
            document.body.appendChild(iframe);
            document.body.appendChild(form);
            
            // Обработчик ответа
            iframe.onload = function() {
                try {
                    // Получаем содержимое iframe
                    const iframeContent = iframe.contentDocument || iframe.contentWindow.document;
                    const responseText = iframeContent.body.textContent || iframeContent.body.innerText;
                    
                    console.log('Ответ от сервера:', responseText);
                    
                    // Парсим JSON ответ
                    let result;
                    try {
                        result = JSON.parse(responseText);
                    } catch (parseError) {
                        // Если не JSON, создаем базовый ответ
                        result = { ok: true, message: 'PDF sent via form' };
                    }
                    
                    // Очищаем DOM
                    document.body.removeChild(iframe);
                    document.body.removeChild(form);
                    
                    if (result.ok) {
                        const successMessage = lang === 'pl' ? 
                            `PDF успешно отправлен!\n\nEmail отправлен на: ${email}` :
                            `PDF successfully sent!\n\nEmail sent to: ${email}`;
                        alert(successMessage);
                        resolve(result);
                    } else {
                        reject(new Error(result.error || 'Unknown error'));
                    }
                    
                } catch (error) {
                    console.error('Ошибка при обработке ответа iframe:', error);
                    reject(error);
                }
            };
            
            // Обработчик ошибок
            iframe.onerror = function() {
                document.body.removeChild(iframe);
                document.body.removeChild(form);
                reject(new Error('Iframe loading failed'));
            };
            
            // Отправляем форму
            console.log('Отправляем форму через iframe...');
            form.submit();
            
            // Таймаут на случай, если iframe не загрузится
            setTimeout(() => {
                if (document.getElementById(iframeId)) {
                    document.body.removeChild(iframe);
                    document.body.removeChild(form);
                    reject(new Error('Iframe timeout'));
                }
            }, 30000); // 30 секунд
            
        });
        
    } catch (error) {
        console.error('=== ОШИБКА ОТПРАВКИ ===');
        console.error('Тип ошибки:', error.name);
        console.error('Сообщение ошибки:', error.message);
        console.error('Стек ошибки:', error.stack);
        
        const errorMessage = lang === 'pl' ? 
            'Ошибка отправки PDF: ' + error.message :
            'Error sending PDF: ' + error.message;
        throw error;
    }
            }

            function shortenForPdf(text, lang='pl', maxLen=180) {
                const s = String(text || '').replace(/[\r\n]+/g, ' ').replace(/\s+/g, ' ').trim();
                if (s.length <= maxLen) return s;
                // Language-aware compression: drop filler words, keep core meaning
                const fillersPl = ['że','to','oraz','i','na','do','z','za','raz','w','jest','są','by','dla'];
                const fillersEn = ['that','the','and','or','to','of','in','is','are','for','by','with'];
                const tokens = s.split(' ');
                const filtered = tokens.filter(t => {
                    const low = t.toLowerCase();
                    return lang === 'pl' ? !fillersPl.includes(low) : !fillersEn.includes(low);
                });
                let joined = filtered.join(' ');
                if (joined.length > maxLen) joined = joined.slice(0, maxLen - 1).trim();
                return joined + '…';
            }

            function pickRecommendations(percent) {
                const lang = currentLanguage || 'pl';
                const recs = (SHORT_RECOMMENDATIONS[lang] || RECOMMENDATIONS[lang]);
                const band = percent <= 30 ? 'low' : (percent <= 60 ? 'mid' : 'high');
                const opts = recs[band];
                return opts[Math.floor(Math.random()*opts.length)];
            }

            const RECOMMENDATIONS = {
                pl: {
                    low: [
                        { title: 'Diagnoza: Wynik {{score_overall}}% sugeruje startowy poziom dojrzałości ESG.', how: 'Co i jak: Zacznij od minimum operacyjnego: polityka środowiskowa, podstawowe KPI HR (rotacja, wypadkowość), właściciel ESG i coroczny przegląd ryzyk.', why: 'Dlaczego: Te elementy najszybciej obniżają ryzyko audytowe i budują fundament pod zgodność z ESRS/CSRD.' },
                        { title: 'Diagnoza: Obecny poziom ESG jest niski i wymaga podstawowych porządków procesowych.', how: 'Co i jak: Ustal 3-miesięczny plan: (1) zmapuj źródła danych, (2) wdroż proste kontrole jakości (4-eyes), (3) przygotuj plan zbierania danych raz na kwartał.', why: 'Dlaczego: Bez spójnych danych nie uruchomisz żadnej automatyzacji ani audytowalnego raportu.' }
                    ],
                    mid: [
                        { title: 'Diagnoza: {{score_overall}}% – masz podstawy, ale brakuje spójności między działami.', how: 'Co i jak: Ujednolić modele danych (jedna tabela "źródło prawdy"), dodać cele (np. redukcja CO₂ do roku X) i przegląd zarządu raz/rok.', why: 'Dlaczego: Spina to procesy w całość i odblokowuje szybki eksport do ESRS/GRI.' },
                        { title: 'Diagnoza: Poziom średni – duży potencjał do "szybkich wygranych".', how: 'Co i jak: Dopnij brakujące polityki (antykorupcyjna, whistleblowing), ustaw kwartalny rytm zbierania danych i bazowe dashboardy KPI.', why: 'Dlaczego: Podniesiesz wiarygodność raportu i obniżysz koszty kolejnego cyklu.' }
                    ],
                    high: [
                        { title: 'Diagnoza: {{score_overall}}% – dojrzały poziom ESG.', how: 'Co i jak: Przejdź na ciągłe zbieranie danych (near‑real time), rozszerz Scope 3 i wprowadź niezależne assurance wybranych wskaźników.', why: 'Dlaczego: To wzmacnia zaufanie inwestorów i pozwala publicznie pokazać przewagę nad rynkiem.' },
                        { title: 'Diagnoza: Wynik wysoki, proces jest stabilny.', how: 'Co i jak: Zintegruj wynagrodzenie zarządu z KPI ESG i uruchom roczne przeglądy celów zewnętrznym doradcą.', why: 'Dlaczego: Powiązanie motywacji z KPI domyka ład korporacyjny i redukuje ryzyko greenwashingu.' }
                    ]
                },
                en: {
                    low: [
                        { title: 'Diagnosis: The score {{score_overall}}% suggests a starting ESG maturity level.', how: 'What/how: Start with the operational minimum: environmental policy, basic HR KPIs (turnover, incident rate), ESG owner and an annual risk review.', why: 'Why: These quickly lower audit risk and build the foundation for ESRS/CSRD compliance.' },
                        { title: 'Diagnosis: Current ESG level is low and requires basic process cleanup.', how: 'What/how: Set a 3‑month plan: (1) map data sources, (2) implement simple 4‑eyes checks, (3) prepare a quarterly data collection plan.', why: 'Why: Without consistent data you cannot automate nor produce an auditable report.' }
                    ],
                    mid: [
                        { title: 'Diagnosis: {{score_overall}}% – foundations exist but lack cross‑department consistency.', how: 'What/how: Standardize data models (single source of truth), add targets (e.g., CO₂ reduction by year X) and conduct an annual board review.', why: 'Why: This connects processes end‑to‑end and enables quick export to ESRS/GRI.' },
                        { title: 'Diagnosis: Mid level – strong potential for quick wins.', how: 'What/how: Finalize missing policies (anti‑corruption, whistleblowing), set a quarterly data rhythm and baseline KPI dashboards.', why: 'Why: Increases report credibility and reduces next‑cycle costs.' }
                    ],
                    high: [
                        { title: 'Diagnosis: {{score_overall}}% – mature ESG level.', how: 'What/how: Move to continuous data collection (near‑real time), expand Scope 3 and add independent assurance for selected metrics.', why: 'Why: Strengthens investor trust and lets you demonstrate market advantage.' },
                        { title: 'Diagnosis: High score, stable process.', how: 'What/how: Link management compensation with ESG KPIs and run annual goal reviews with an external advisor.', why: 'Why: Aligning incentives with KPIs completes governance and reduces greenwashing risk.' }
                    ]
                }
            };

            // Concise variants for PDF (short, semantic)
            const SHORT_RECOMMENDATIONS = {
                pl: {
                    low: [
                        { title: 'Wynik {{score_overall}}% – start.', how: 'Polityka środowiskowa, podstawowe KPI HR, właściciel ESG.', why: 'Szybko obniża ryzyko i daje bazę pod ESRS/CSRD.' },
                        { title: 'ESG niski – porządek w danych.', how: 'Mapa źródeł, 4‑eyes, kwartalne zbieranie.', why: 'Bez danych nie ma audytowalnego raportu.' }
                    ],
                    mid: [
                        { title: '{{score_overall}}% – brak spójności.', how: 'Ujednolić model danych, dodać cele i roczny przegląd.', why: 'Spina procesy i ułatwia ESRS/GRI.' },
                        { title: 'Poziom średni – szybkie wygrane.', how: 'Domknąć polityki, kwartalny rytm, bazowe KPI.', why: 'Wiarygodniejszy raport i niższe koszty.' }
                    ],
                    high: [
                        { title: '{{score_overall}}% – dojrzały.', how: 'Ciągłe dane, rozszerzyć Scope 3, dodać assurance.', why: 'Większe zaufanie i przewaga rynkowa.' },
                        { title: 'Wynik wysoki, proces stabilny.', how: 'Powiązać wynagrodzenie z KPI ESG, coroczny przegląd celów.', why: 'Domknięty ład i mniej greenwashingu.' }
                    ]
                },
                en: {
                    low: [
                        { title: '{{score_overall}}% – starting point.', how: 'Env. policy, basic HR KPIs, ESG owner.', why: 'Quickly lowers audit risk; base for ESRS/CSRD.' },
                        { title: 'Low ESG – fix data basics.', how: 'Source map, 4‑eyes checks, quarterly collection.', why: 'No consistent data → no auditable report.' }
                    ],
                    mid: [
                        { title: '{{score_overall}}% – gaps in consistency.', how: 'Standardize data model, add targets, annual board review.', why: 'Connects processes; easy ESRS/GRI export.' },
                        { title: 'Mid level – quick wins.', how: 'Finish policies, quarterly rhythm, baseline KPIs.', why: 'Higher credibility, lower costs.' }
                    ],
                    high: [
                        { title: '{{score_overall}}% – mature.', how: 'Continuous data, expand Scope 3, add assurance.', why: 'Stronger trust; market edge.' },
                        { title: 'High and stable.', how: 'Link pay to ESG KPIs; yearly goal reviews.', why: 'Aligns incentives; reduces greenwashing risk.' }
                    ]
                }
            };

            function pickCategoryRecommendation(categoryKey, percent) {
                const lang = (currentLanguage || 'pl');
                const source = SHORT_RECOMMENDATIONS_CATEGORIES[lang] || RECOMMENDATIONS_CATEGORIES[lang] || RECOMMENDATIONS_CATEGORIES['pl'];
                const band = percent <= 30 ? 'low' : (percent <= 60 ? 'mid' : 'high');
                const opts = (source[categoryKey] && source[categoryKey][band]) || [];
                return opts.length ? opts[Math.floor(Math.random()*opts.length)] : null;
            }

            const RECOMMENDATIONS_CATEGORIES = {
                pl: {
                    e: {
                        low: [
                            { title: 'Diagnoza: Brakuje monitoringu energii i emisji.', how: 'Co i jak: Wdroż prosty pomiar energii (faktury + licznik) i zacznij od Scope 1–2; przygotuj politykę środowiskową.', why: 'Dlaczego: Bez danych emisji nie zaplanujesz realnych celów redukcyjnych.' },
                            { title: 'Diagnoza: Obszar E jest na wczesnym etapie.', how: 'Co i jak: Ustal bazę emisji (rok bazowy), zacznij raportować zużycie energii i wprowadź min. 20% OZE w miksie.', why: 'Dlaczego: To szybka ścieżka do widocznej poprawy i zgodności z oczekiwaniami ESRS.' }
                        ],
                        mid: [
                            { title: 'Diagnoza: Monitorujesz część wskaźników, ale nie wszystkie zakresy emisji.', how: 'Co i jak: Rozszerz zakres na Scope 1–2 (docelowo 3), wprowadź kwartalne zbieranie danych i plan redukcji do roku X.', why: 'Dlaczego: Pełniejszy obraz środowiskowy i przewidywalność celów.' },
                            { title: 'Diagnoza: Stabilne podstawy, brakuje celów i OZE.', how: 'Co i jak: Zdefiniuj roczne cele (kWh/produkt, tCO₂e/rok) i zwiększ udział OZE do ≥20%.', why: 'Dlaczego: Cele operacyjne wymuszają realną poprawę, OZE obniża emisje Scope 2.' }
                        ],
                        high: [
                            { title: 'Diagnoza: Monitoring E jest dojrzały.', how: 'Co i jak: Rozwiń Scope 3 dla kluczowych kategorii i wprowadź weryfikację zewnętrzną wybranych wskaźników.', why: 'Dlaczego: Podnosi wiarygodność i gotowość na audyt.' },
                            { title: 'Diagnoza: Wysoka kontrola nad danymi E.', how: 'Co i jak: Przenieś zbieranie energii i emisji do trybu ciągłego (IoT/ETL) i postaw na OZE 50%+.', why: 'Dlaczego: Ciągłość = lepsze decyzje operacyjne i przewaga kosztowa.' }
                        ]
                    },
                    s: {
                        low: [
                            { title: 'Diagnoza: Brak polityk i danych HR.', how: 'Co i jak: Wprowadź whistleblowing, podstawowe wskaźniki HR (rotacja, absencja) i monitoring wypadkowości.', why: 'Dlaczego: To rdzeń bezpieczeństwa i zgodności (w tym dyrektywa o sygnalistach).' },
                            { title: 'Diagnoza: Obszar S jest nieuporządkowany.', how: 'Co i jak: Przygotuj politykę DEI i min. 8h szkoleń/os./rok; uruchom rejestr incydentów BHP.', why: 'Dlaczego: Buduje kulturę i minimalizuje ryzyko operacyjne.' }
                        ],
                        mid: [
                            { title: 'Diagnoza: Podstawy S działają, brakuje głębi.', how: 'Co i jak: Wprowadź pomiar luki płacowej i regularne ankiety pracownicze.', why: 'Dlaczego: Dane jakościowe i równościowe zwiększają zaufanie i retencję.' },
                            { title: 'Diagnoza: Częściowy raport HR, brak pełnych KPI BHP.', how: 'Co i jak: Ustal LTIFR/TRIR i targety szkoleń (≥12h/os./rok).', why: 'Dlaczego: To standard branżowy i szybka poprawa wyników S.' }
                        ],
                        high: [
                            { title: 'Diagnoza: Silny obszar S.', how: 'Co i jak: Skaluj programy DEI na kadrę zarządzającą i publikuj roczne cele S.', why: 'Dlaczego: Transparentność wzmacnia markę pracodawcy.' },
                            { title: 'Diagnoza: Stabilne praktyki społeczne.', how: 'Co i jak: Dodaj zewnętrzną ewaluację BHP/HR raz w roku.', why: 'Dlaczego: Niezależne spojrzenie ogranicza ryzyko "ślepych punktów".' }
                        ]
                    },
                    g: {
                        low: [
                            { title: 'Diagnoza: Brakuje właściciela ESG i kontroli danych.', how: 'Co i jak: Powołaj właściciela/komitet ESG i wprowadź zasadę 4‑eyes w krytycznych metrykach.', why: 'Dlaczego: Bez odpowiedzialności i kontroli dane nie są audytowalne.' },
                            { title: 'Diagnoza: Niski poziom ładu.', how: 'Co i jak: Przyjmij politykę antykorupcyjną i włącz ESG do rocznej oceny ryzyk zarządu.', why: 'Dlaczego: To fundament zgodności i oczekiwań rynku.' }
                        ],
                        mid: [
                            { title: 'Diagnoza: Mechanizmy G działają częściowo.', how: 'Co i jak: Powiąż część wynagrodzeń kadry z KPI ESG i prowadź kwartalne przeglądy ryzyk.', why: 'Dlaczego: Zwiększa egzekwowalność celów.' },
                            { title: 'Diagnoza: Są polityki, brakuje integracji z wynagradzaniem.', how: 'Co i jak: Zdefiniuj 2–3 KPI (np. emisje/E, LTIFR/S) w systemie premiowym.', why: 'Dlaczego: Motywacja domyka ład i redukuje ryzyko greenwashingu.' }
                        ],
                        high: [
                            { title: 'Diagnoza: Ład ESG dojrzały.', how: 'Co i jak: Ustanów coroczny przegląd zewnętrzny ram G i scenariusze stresowe ESG.', why: 'Dlaczego: To wzmacnia odporność i zaufanie inwestorów.' },
                            { title: 'Diagnoza: Bardzo dobry poziom G.', how: 'Co i jak: Rozszerz raport na poziom grupy i publikuj wyniki KPI ESG kwartalnie.', why: 'Dlaczego: Regularność zwiększa przejrzystość i dyscyplinę.' }
                        ]
                    },
                    sup: {
                        low: [
                            { title: 'Diagnoza: Brak danych od dostawców.', how: 'Co i jak: Zidentyfikuj 20 kluczowych dostawców i wyślij krótką ankietę ESG raz w roku.', why: 'Dlaczego: To minimalny poziom due diligence i baza do Scope 3.' },
                            { title: 'Diagnoza: Łańcuch nieobjęty oceną ESG.', how: 'Co i jak: Dodaj kryteria ESG do zakupów i zacznij od <25% pokrycia, rosnąc kwartalnie.', why: 'Dlaczego: Ograniczysz ryzyka operacyjne i prawne.' }
                        ],
                        mid: [
                            { title: 'Diagnoza: Częściowe pokrycie i roczna częstotliwość.', how: 'Co i jak: Zwiększ pokrycie do 25–75% i przejdź na kwartalne zbieranie danych.', why: 'Dlaczego: Lepsza aktualność danych = realne decyzje.' },
                            { title: 'Diagnoza: Dane są, ale nieregularne.', how: 'Co i jak: Ustal stały katalog pytań ESG i harmonogram (Q1/Q2/Q3/Q4).', why: 'Dlaczego: Spójność i porównywalność wyników.' }
                        ],
                        high: [
                            { title: 'Diagnoza: Szerokie pokrycie i częste zbieranie.', how: 'Co i jak: Przejdź na ciągłą wymianę danych (API/portal dostawcy) i audytuj ryzykowne kategorie.', why: 'Dlaczego: Zwiększa to przewidywalność dostaw i jakość Scope 3.' },
                            { title: 'Diagnoza: Łańcuch działa poprawnie.', how: 'Co i jak: Wprowadź program rozwojowy dla dostawców (cele + wsparcie).', why: 'Dlaczego: Podniesiesz poziom całego ekosystemu i obniżysz własne ryzyka.' }
                        ]
                    }
                },
                en: {
                    e: {
                        low: [
                            { title: 'Diagnosis: Missing energy/emission monitoring.', how: 'What/how: Implement simple energy metering (invoices + meter) and start with Scope 1–2; prepare an environmental policy.', why: 'Why: Without emission data, you cannot plan realistic reduction targets.' },
                            { title: 'Diagnosis: Environment area is at an early stage.', how: 'What/how: Establish a baseline year, start reporting energy use and include at least 20% renewables in the mix.', why: 'Why: Fast path to visible improvements and ESRS expectations.' }
                        ],
                        mid: [
                            { title: 'Diagnosis: You monitor some KPIs but not all emission scopes.', how: 'What/how: Extend scope to 1–2 (target 3), introduce quarterly collection and a reduction plan by year X.', why: 'Why: A fuller environmental picture and predictable targets.' },
                            { title: 'Diagnosis: Stable basics, missing goals and RES.', how: 'What/how: Define yearly targets (kWh/product, tCO₂e/year) and raise RES share to ≥20%.', why: 'Why: Operational targets enforce real improvement; RES lowers Scope 2.' }
                        ],
                        high: [
                            { title: 'Diagnosis: E monitoring is mature.', how: 'What/how: Expand Scope 3 for key categories and add external assurance for selected metrics.', why: 'Why: Increases credibility and audit readiness.' },
                            { title: 'Diagnosis: High control over E data.', how: 'What/how: Move energy/emissions collection to continuous mode (IoT/ETL) and target ≥50% RES.', why: 'Why: Continuity = better operational decisions and cost advantage.' }
                        ]
                    },
                    s: {
                        low: [
                            { title: 'Diagnosis: Missing policies and HR data.', how: 'What/how: Introduce whistleblowing, basic HR KPIs (turnover, absence) and safety incident tracking.', why: 'Why: Core of safety and compliance (incl. whistleblower directive).' },
                            { title: 'Diagnosis: Social area is unorganized.', how: 'What/how: Prepare a DEI policy and ≥8h training/person/year; start an H&S incident register.', why: 'Why: Builds culture and reduces operational risk.' }
                        ],
                        mid: [
                            { title: 'Diagnosis: Social basics work, but lack depth.', how: 'What/how: Measure pay gap and run regular employee surveys.', why: 'Why: Qualitative and equality data increase trust and retention.' },
                            { title: 'Diagnosis: Partial HR report, missing full H&S KPIs.', how: 'What/how: Define LTIFR/TRIR and training targets (≥12h/person/year).', why: 'Why: Industry standard and quick improvement of S results.' }
                        ],
                        high: [
                            { title: 'Diagnosis: Strong S area.', how: 'What/how: Scale DEI programs to management and publish annual S goals.', why: 'Why: Transparency strengthens employer brand.' },
                            { title: 'Diagnosis: Stable social practices.', how: 'What/how: Add external H&S/HR evaluation once a year.', why: 'Why: Independent view reduces blind‑spot risk.' }
                        ]
                    },
                    g: {
                        low: [
                            { title: 'Diagnosis: No ESG owner and data controls.', how: 'What/how: Appoint an ESG owner/committee and introduce 4‑eyes rule for critical metrics.', why: 'Why: Without responsibility and control, data is not auditable.' },
                            { title: 'Diagnosis: Low governance level.', how: 'What/how: Adopt an anti‑corruption policy and include ESG in the board annual risk review.', why: 'Why: Foundation of compliance and market expectations.' }
                        ],
                        mid: [
                            { title: 'Diagnosis: Governance works partially.', how: 'What/how: Link part of management compensation to ESG KPIs and run quarterly risk reviews.', why: 'Why: Increases enforceability of goals.' },
                            { title: 'Diagnosis: Policies exist, missing link to compensation.', how: 'What/how: Define 2–3 KPIs (e.g., emissions/E, LTIFR/S) in the bonus system.', why: 'Why: Motivation completes governance and reduces greenwashing risk.' }
                        ],
                        high: [
                            { title: 'Diagnosis: Mature ESG governance.', how: 'What/how: Establish an annual external review of G framework and ESG stress scenarios.', why: 'Why: Strengthens resilience and investor trust.' },
                            { title: 'Diagnosis: Very good G level.', how: 'What/how: Extend reporting to group level and publish ESG KPI results quarterly.', why: 'Why: Regularity increases transparency and discipline.' }
                        ]
                    },
                    sup: {
                        low: [
                            { title: 'Diagnosis: No supplier data.', how: 'What/how: Identify 20 key suppliers and send a short ESG questionnaire once a year.', why: 'Why: Minimal due diligence and foundation for Scope 3.' },
                            { title: 'Diagnosis: Supply chain not covered by ESG assessment.', how: 'What/how: Add ESG criteria to procurement and start with <25% coverage, growing quarterly.', why: 'Why: Reduces operational and legal risks.' }
                        ],
                        mid: [
                            { title: 'Diagnosis: Partial coverage and annual frequency.', how: 'What/how: Raise coverage to 25–75% and move to quarterly data collection.', why: 'Why: Fresher data = real decisions.' },
                            { title: 'Diagnosis: Data exists but irregular.', how: 'What/how: Set a stable ESG question catalog and schedule (Q1/Q2/Q3/Q4).', why: 'Why: Consistency and comparability of results.' }
                        ],
                        high: [
                            { title: 'Diagnosis: Broad coverage and frequent collection.', how: 'What/how: Move to continuous data exchange (API/supplier portal) and audit risky categories.', why: 'Why: Increases supply predictability and Scope 3 quality.' },
                            { title: 'Diagnosis: Supply chain works correctly.', how: 'What/how: Introduce a supplier development program (targets + support).', why: 'Why: Lifts ecosystem level and lowers your risks.' }
                        ]
                    }
                }
            };

            const SHORT_RECOMMENDATIONS_CATEGORIES = {
                pl: {
                    e: {
                        low: [
                            { title: 'Brak monitoringu energii/emisji.', how: 'Prosty pomiar + Scope 1–2; polityka środowiskowa.', why: 'Bez danych nie ma celów.' },
                            { title: 'E na starcie.', how: 'Ustal rok bazowy, raportuj energię, ≥20% OZE.', why: 'Szybka poprawa i zgodność.' }
                        ],
                        mid: [
                            { title: 'Częściowy monitoring.', how: 'Rozszerz Scope 1–2→3; kwartalne zbieranie; plan redukcji.', why: 'Pełniejszy obraz i przewidywalność.' },
                            { title: 'Brak celów/OZE.', how: 'Zdefiniuj cele roczne; OZE ≥20%.', why: 'Cele wymuszają poprawę; OZE obniża Scope 2.' }
                        ],
                        high: [
                            { title: 'Dojrzały monitoring E.', how: 'Rozwiń Scope 3; zewnętrzna weryfikacja.', why: 'Wiarygodność i gotowość na audyt.' },
                            { title: 'Wysoka kontrola E.', how: 'Ciągłe zbieranie (IoT/ETL); OZE ≥50%.', why: 'Lepsze decyzje i przewaga kosztowa.' }
                        ]
                    },
                    s: {
                        low: [
                            { title: 'Brak polityk/HR danych.', how: 'Whistleblowing, podstawowe KPI HR, rejestr wypadków.', why: 'Bezpieczeństwo i zgodność.' },
                            { title: 'S nieuporządkowany.', how: 'Polityka DEI; ≥8h szkoleń/os.; rejestr BHP.', why: 'Kultura i niższe ryzyko.' }
                        ],
                        mid: [
                            { title: 'Podstawy są.', how: 'Pomiar luki płacowej, regularne ankiety.', why: 'Wyższe zaufanie i retencja.' },
                            { title: 'Brak pełnych KPI BHP.', how: 'LTIFR/TRIR; ≥12h szkoleń/os.', why: 'Standard branżowy, szybka poprawa.' }
                        ],
                        high: [
                            { title: 'Silny obszar S.', how: 'Skaluj DEI na kadrę; publikuj cele.', why: 'Silna marka pracodawcy.' },
                            { title: 'Stabilne praktyki S.', how: 'Zewnętrzna ewaluacja HR/BHP raz w roku.', why: 'Mniej "ślepych punktów".' }
                        ]
                    },
                    g: {
                        low: [
                            { title: 'Brak właściciela ESG/kontroli.', how: 'Właściciel/komitet; zasada 4‑eyes.', why: 'Dane muszą być audytowalne.' },
                            { title: 'Niski ład.', how: 'Polityka antykorupcyjna; ESG w ocenie ryzyk.', why: 'Fundament zgodności.' }
                        ],
                        mid: [
                            { title: 'Mechanizmy częściowe.', how: 'Powiąż premię z KPI ESG; kwartalne przeglądy.', why: 'Większa egzekwowalność celów.' },
                            { title: 'Polityki bez powiązań.', how: '2–3 KPI w systemie premiowym.', why: 'Domknięty ład, mniej greenwashingu.' }
                        ],
                        high: [
                            { title: 'Dojrzały ład ESG.', how: 'Roczny przegląd zewnętrzny; stres‑scenariusze.', why: 'Większa odporność i zaufanie.' },
                            { title: 'Bardzo dobry poziom G.', how: 'Raport na poziom grupy; KPI kwartalnie.', why: 'Regularność = przejrzystość.' }
                        ]
                    },
                    sup: {
                        low: [
                            { title: 'Brak danych od dostawców.', how: '20 kluczowych; krótka ankieta raz/rok.', why: 'Minimum due diligence; baza Scope 3.' },
                            { title: 'Zakupy bez ESG.', how: 'Kryteria ESG; start <25% pokrycia.', why: 'Mniej ryzyk operacyjnych/prawnych.' }
                        ],
                        mid: [
                            { title: 'Częściowe pokrycie.', how: '25–75% i kwartalne zbieranie.', why: 'Aktualniejsze dane = decyzje.' },
                            { title: 'Dane nieregularne.', how: 'Stały katalog pytań i harmonogram.', why: 'Spójność i porównywalność.' }
                        ],
                        high: [
                            { title: 'Szerokie pokrycie.', how: 'Ciągła wymiana (API/portal), audyty ryzyka.', why: 'Lepsza przewidywalność i Scope 3.' },
                            { title: 'Łańcuch działa.', how: 'Program rozwojowy dostawców.', why: 'Wyższy poziom ekosystemu, niższe ryzyka.' }
                        ]
                    }
                },
                en: {
                    e: {
                        low: [
                            { title: 'No energy/emission monitoring.', how: 'Simple metering + Scope 1–2; env. policy.', why: 'No data → no targets.' },
                            { title: 'E at early stage.', how: 'Baseline year, report energy, ≥20% RES.', why: 'Fast improvement and ESRS.' }
                        ],
                        mid: [
                            { title: 'Partial monitoring.', how: 'Extend 1–2→3; quarterly data; reduction plan.', why: 'Fuller view and predictability.' },
                            { title: 'Missing goals/RES.', how: 'Yearly targets; RES ≥20%.', why: 'Targets drive change; RES lowers Scope 2.' }
                        ],
                        high: [
                            { title: 'Mature E monitoring.', how: 'Expand Scope 3; external assurance.', why: 'Credibility and audit‑ready.' },
                            { title: 'High E control.', how: 'Continuous collection (IoT/ETL); RES ≥50%.', why: 'Better ops and cost edge.' }
                        ]
                    },
                    s: {
                        low: [
                            { title: 'No policies/HR data.', how: 'Whistleblowing, basic HR KPIs, incident log.', why: 'Safety and compliance.' },
                            { title: 'Unorganized S.', how: 'DEI policy; ≥8h training; H&S register.', why: 'Culture and lower risk.' }
                        ],
                        mid: [
                            { title: 'Basics OK, lacks depth.', how: 'Pay‑gap measure; regular surveys.', why: 'Trust and retention.' },
                            { title: 'Partial HR; missing H&S.', how: 'LTIFR/TRIR; ≥12h/person.', why: 'Industry standard; quick wins.' }
                        ],
                        high: [
                            { title: 'Strong S.', how: 'Scale DEI to management; publish goals.', why: 'Employer brand.' },
                            { title: 'Stable practices.', how: 'External HR/H&S review yearly.', why: 'Fewer blind spots.' }
                        ]
                    },
                    g: {
                        low: [
                            { title: 'No ESG owner/controls.', how: 'Owner/committee; 4‑eyes rule.', why: 'Auditable data needs ownership.' },
                            { title: 'Low governance.', how: 'Anti‑corruption policy; ESG in risk review.', why: 'Compliance foundation.' }
                        ],
                        mid: [
                            { title: 'Partial mechanisms.', how: 'Link pay to ESG KPIs; quarterly reviews.', why: 'Enforceability.' },
                            { title: 'Policies not linked.', how: '2–3 KPIs in bonus system.', why: 'Closed governance; less greenwashing.' }
                        ],
                        high: [
                            { title: 'Mature ESG governance.', how: 'Annual external review; stress tests.', why: 'Resilience and trust.' },
                            { title: 'Very good G.', how: 'Group‑level report; quarterly KPIs.', why: 'Transparency and discipline.' }
                        ]
                    },
                    sup: {
                        low: [
                            { title: 'No supplier data.', how: 'Top 20 suppliers; short survey yearly.', why: 'Min due diligence; Scope 3 base.' },
                            { title: 'No ESG in procurement.', how: 'Add ESG criteria; start <25% coverage.', why: 'Lower ops/legal risks.' }
                        ],
                        mid: [
                            { title: 'Partial coverage.', how: 'Raise to 25–75%; quarterly.', why: 'Fresher data = better decisions.' },
                            { title: 'Irregular data.', how: 'Stable question set and cadence.', why: 'Consistency and comparability.' }
                        ],
                        high: [
                            { title: 'Broad coverage.', how: 'Continuous exchange (API/portal); audit risks.', why: 'Predictability; Scope 3 quality.' },
                            { title: 'Chain works.', how: 'Supplier development program.', why: 'Ecosystem up; risks down.' }
                        ]
                    }
                }
            };

            // ===== Country dropdown =====
            const COUNTRIES = [
                'Poland','United Kingdom','United States','Germany','France','Spain','Italy','Netherlands','Sweden','Norway','Finland','Denmark','Czechia','Slovakia','Ukraine','Lithuania','Latvia','Estonia','Austria','Belgium','Portugal','Greece','Ireland','Switzerland','Romania','Bulgaria','Croatia','Slovenia','Hungary','Serbia','Bosnia and Herzegovina','North Macedonia','Albania','Montenegro','Iceland','Canada','Mexico','Brazil','Argentina','Chile','Peru','Colombia','Australia','New Zealand','Japan','South Korea','China','India','Thailand','Vietnam','Singapore','Malaysia','Indonesia','Philippines','Turkey','Israel','Saudi Arabia','UAE','Qatar','Egypt','South Africa','Morocco','Tunisia'
            ];
            function initCountryDropdown() {
                const input = qs('country-input');
                const list = qs('country-list');
                const wrap = qs('country-dropdown');
                if (!input || !list || !wrap) return;
                const render = (q='') => {
                    const lc = q.toLowerCase();
                    list.innerHTML = '';
                    COUNTRIES.filter(c => c.toLowerCase().includes(lc)).slice(0, 200).forEach(c => {
                        const item = document.createElement('div');
                        item.textContent = c;
                        item.style.padding = '8px 12px';
                        item.style.cursor = 'pointer';
                        item.addEventListener('click', () => { input.value = c; wrap.style.display = 'none'; });
                        item.addEventListener('mouseenter', () => item.style.background = '#f3f4f6');
                        item.addEventListener('mouseleave', () => item.style.background = '');
                        list.appendChild(item);
                    });
                };
                input.addEventListener('click', () => { wrap.style.display = 'block'; render(''); });
                input.addEventListener('input', (e) => { wrap.style.display = 'block'; render(e.target.value || ''); });
                document.addEventListener('click', (e) => { if (!wrap.contains(e.target) && e.target !== input) wrap.style.display = 'none'; });
            }

            // Bind modal controls once DOM ready
            document.addEventListener('DOMContentLoaded', () => {
                const closeBtn = qs('survey-close');
                const startBtn = qs('survey-start');
                const skipBtn = qs('survey-skip');
                const prevBtn = qs('survey-prev');
                const submitBtn = qs('survey-submit');
                const overlay = qs('survey-modal');
                if (closeBtn) closeBtn.addEventListener('click', closeSurveyModal);
                if (overlay) overlay.addEventListener('click', (e) => { if (e.target === overlay) closeSurveyModal(); });
                if (startBtn) startBtn.addEventListener('click', () => showStep('form'));
                if (skipBtn) skipBtn.addEventListener('click', closeSurveyModal);
                if (prevBtn) prevBtn.addEventListener('click', () => showStep('form'));
                if (submitBtn) submitBtn.addEventListener('click', renderResults);
                initCountryDropdown();
            });
        })();
    </script>
<script id="dhws-dataInjector" src="public/dhws-data-injector.js"></script>
</body>
</html>